{"ast":null,"code":"import { ref, computed, onMounted, onBeforeUnmount } from 'vue';\nexport default {\n  setup() {\n    const cardVisible = ref(false);\n    const clicked = ref(false);\n    const toggleNotification = () => {\n      cardVisible.value = !cardVisible.value;\n      clicked.value = !clicked.value; // Toggle the 'clicked' state\n    };\n\n    // Computed property to calculate button color based on 'clicked' state\n    const buttonColor = computed(() => clicked.value ? 'grey' : ''); // Set to 'red' when clicked, else empty\n\n    const notificationItems = [{\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }, {\n      id: 1,\n      title: 'Single line item',\n      description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.',\n      time: '5 min ago',\n      starred: true\n    }\n    // Add more items as needed\n    ];\n\n    const handleGlobalClick = event => {\n      // Check if the clicked element is outside the button and the notification card\n      const isOutsideButton = !event.target.closest('.q-btn');\n      const isOutsideNotificationCard = !event.target.closest('.notification-card');\n\n      // Close the notification card if it's open and the click is outside both the button and the card\n      if (cardVisible.value && isOutsideButton && isOutsideNotificationCard) {\n        cardVisible.value = false;\n        clicked.value = false;\n      }\n    };\n\n    // Close the notification card when a global click event is emitted from another component\n    const closeNotificationCard = () => {\n      cardVisible.value = false;\n      clicked.value = false;\n    };\n\n    // Add and remove the global click event listener when the component is mounted and unmounted\n    onMounted(() => {\n      document.addEventListener('click', handleGlobalClick);\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('click', handleGlobalClick);\n    });\n\n    // Listen for global events from other components\n    window.addEventListener('closeNotificationCard', closeNotificationCard);\n    return {\n      cardVisible,\n      toggleNotification,\n      buttonColor,\n      // Expose the computed 'buttonColor' to the template\n      notificationItems,\n      handleGlobalClick\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onBeforeUnmount","setup","cardVisible","clicked","toggleNotification","value","buttonColor","notificationItems","id","title","description","time","starred","handleGlobalClick","event","isOutsideButton","target","closest","isOutsideNotificationCard","closeNotificationCard","document","addEventListener","removeEventListener","window"],"sources":["C:\\Users\\user\\OneDrive\\Desktop\\HiyasProject\\src\\components\\Notifications.vue"],"sourcesContent":["<template>\r\n    <q-btn dense round :color=\"buttonColor\" class=\"q-mr-md no-shadow\" @click=\"toggleNotification\">\r\n        <q-icon name=\"notifications\" style=\"color: black;\" />\r\n        <q-badge color=\"red\" floating>4</q-badge>\r\n    </q-btn>\r\n\r\n    <div class=\"row one justify-center\">\r\n        <div class=\"notification-card\" v-if=\"cardVisible\">\r\n            <q-card bordered class=\"my-card\">\r\n                <div class=\"scrollable-list\">\r\n                    <q-list bordered class=\"rounded-borders\">\r\n                        <div class=\"row\">\r\n                            <div class=\"row col-5 items-start q-pa-md\">Notifications</div>\r\n                        </div>\r\n                        <q-separator spaced />\r\n\r\n                        <template v-for=\"item in notificationItems\" :key=\"item.id\">\r\n                            <q-item clickable v-ripple>\r\n                                <q-item-section top avatar>\r\n                                    <q-avatar color=\"primary\" text-color=\"white\" icon=\"bluetooth\" />\r\n                                </q-item-section>\r\n\r\n                                <q-item-section>\r\n                                    <q-item-label>{{ item.title }}</q-item-label>\r\n                                    <q-item-label caption lines=\"2\">{{ item.description }}</q-item-label>\r\n                                </q-item-section>\r\n\r\n                                <q-item-section side top>\r\n                                    <q-item-label caption>{{ item.time }}</q-item-label>\r\n                                    <q-icon v-if=\"item.starred\" name=\"star\" color=\"yellow\" />\r\n                                </q-item-section>\r\n                            </q-item>\r\n                            <q-separator spaced />\r\n                        </template>\r\n                    </q-list>\r\n                </div>\r\n            </q-card>\r\n        </div>\r\n        <div @click=\"handleGlobalClick\"></div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\r\n\r\nexport default {\r\n    setup() {\r\n        const cardVisible = ref(false);\r\n        const clicked = ref(false);\r\n\r\n        const toggleNotification = () => {\r\n            cardVisible.value = !cardVisible.value;\r\n            clicked.value = !clicked.value; // Toggle the 'clicked' state\r\n        };\r\n\r\n        // Computed property to calculate button color based on 'clicked' state\r\n        const buttonColor = computed(() => (clicked.value ? 'grey' : '')); // Set to 'red' when clicked, else empty\r\n\r\n        const notificationItems = [\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            { id: 1, title: 'Single line item', description: 'Secondary line text. Lorem ipsum dolor sit amet, consectetur adipiscit elit.', time: '5 min ago', starred: true },\r\n            // Add more items as needed\r\n        ];\r\n\r\n         const handleGlobalClick = (event) => {\r\n      // Check if the clicked element is outside the button and the notification card\r\n      const isOutsideButton = !event.target.closest('.q-btn');\r\n      const isOutsideNotificationCard = !event.target.closest('.notification-card');\r\n\r\n      // Close the notification card if it's open and the click is outside both the button and the card\r\n      if (cardVisible.value && isOutsideButton && isOutsideNotificationCard) {\r\n        cardVisible.value = false;\r\n        clicked.value = false;\r\n      }\r\n    };\r\n\r\n    // Close the notification card when a global click event is emitted from another component\r\n    const closeNotificationCard = () => {\r\n      cardVisible.value = false;\r\n      clicked.value = false;\r\n    };\r\n\r\n    // Add and remove the global click event listener when the component is mounted and unmounted\r\n    onMounted(() => {\r\n      document.addEventListener('click', handleGlobalClick);\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      document.removeEventListener('click', handleGlobalClick);\r\n    });\r\n\r\n    // Listen for global events from other components\r\n    window.addEventListener('closeNotificationCard', closeNotificationCard);\r\n\r\n\r\n        return {\r\n            cardVisible,\r\n            toggleNotification,\r\n            buttonColor, // Expose the computed 'buttonColor' to the template\r\n            notificationItems,\r\n            handleGlobalClick,\r\n        };\r\n    },\r\n};\r\n</script>\r\n  \r\n<style lang=\"sass\" scoped>\r\n  .my-card\r\n    width: 350px\r\n    max-width: 100%\r\n    color: black\r\n  \r\n  .scrollable-list\r\n    max-height: 450px \r\n    overflow-y: auto\r\n  \r\n  .one\r\n    background-color: black\r\n  \r\n  .notification-card\r\n    position: absolute\r\n    z-index: 1\r\n    top: 0\r\n    right: 0\r\n    margin-top: 55px\r\n    margin-right: 10px\r\n  </style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}