{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport { h, ref, computed, watch, Transition, nextTick, getCurrentInstance } from 'vue';\nimport QBtn from '../btn/QBtn.js';\nimport useDark, { useDarkProps } from '../../composables/private/use-dark.js';\nimport useCache from '../../composables/private/use-cache.js';\nimport { useFormProps, useFormAttrs, useFormInject } from '../../composables/private/use-form.js';\nimport useDatetime, { useDatetimeProps, useDatetimeEmits, getDayHash } from './use-datetime.js';\nimport { createComponent } from '../../utils/private/create.js';\nimport { hSlot } from '../../utils/private/render.js';\nimport { formatDate, __splitDate, getDateDiff } from '../../utils/date.js';\nimport { pad } from '../../utils/format.js';\nimport { jalaaliMonthLength, toGregorian } from '../../utils/private/date-persian.js';\nimport { isObject } from '../../utils/is.js';\nconst yearsInterval = 20;\nconst views = ['Calendar', 'Years', 'Months'];\nconst viewIsValid = v => views.includes(v);\nconst yearMonthValidator = v => /^-?[\\d]+\\/[0-1]\\d$/.test(v);\nconst lineStr = ' \\u2014 ';\nfunction getMonthHash(date) {\n  return date.year + '/' + pad(date.month);\n}\nexport default createComponent({\n  name: 'QDate',\n  props: {\n    ...useDatetimeProps,\n    ...useFormProps,\n    ...useDarkProps,\n    multiple: Boolean,\n    range: Boolean,\n    title: String,\n    subtitle: String,\n    mask: {\n      // this mask is forced\n      // when using persian calendar\n      default: 'YYYY/MM/DD'\n    },\n    defaultYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n    yearsInMonthView: Boolean,\n    events: [Array, Function],\n    eventColor: [String, Function],\n    emitImmediately: Boolean,\n    options: [Array, Function],\n    navigationMinYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n    navigationMaxYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n    noUnset: Boolean,\n    firstDayOfWeek: [String, Number],\n    todayBtn: Boolean,\n    minimal: Boolean,\n    defaultView: {\n      type: String,\n      default: 'Calendar',\n      validator: viewIsValid\n    }\n  },\n  emits: [...useDatetimeEmits, 'rangeStart', 'rangeEnd', 'navigation'],\n  setup(props, {\n    slots,\n    emit\n  }) {\n    const {\n      proxy\n    } = getCurrentInstance();\n    const {\n      $q\n    } = proxy;\n    const isDark = useDark(props, $q);\n    const {\n      getCache\n    } = useCache();\n    const {\n      tabindex,\n      headerClass,\n      getLocale,\n      getCurrentDate\n    } = useDatetime(props, $q);\n    let lastEmitValue;\n    const formAttrs = useFormAttrs(props);\n    const injectFormInput = useFormInject(formAttrs);\n    const blurTargetRef = ref(null);\n    const innerMask = ref(getMask());\n    const innerLocale = ref(getLocale());\n    const mask = computed(() => getMask());\n    const locale = computed(() => getLocale());\n    const today = computed(() => getCurrentDate());\n\n    // model of current calendar view:\n    const viewModel = ref(getViewModel(innerMask.value, innerLocale.value));\n    const view = ref(props.defaultView);\n    const direction = $q.lang.rtl === true ? 'right' : 'left';\n    const monthDirection = ref(direction.value);\n    const yearDirection = ref(direction.value);\n    const year = viewModel.value.year;\n    const startYear = ref(year - year % yearsInterval - (year < 0 ? yearsInterval : 0));\n    const editRange = ref(null);\n    const classes = computed(() => {\n      const type = props.landscape === true ? 'landscape' : 'portrait';\n      return `q-date q-date--${type} q-date--${type}-${props.minimal === true ? 'minimal' : 'standard'}` + (isDark.value === true ? ' q-date--dark q-dark' : '') + (props.bordered === true ? ' q-date--bordered' : '') + (props.square === true ? ' q-date--square no-border-radius' : '') + (props.flat === true ? ' q-date--flat no-shadow' : '') + (props.disable === true ? ' disabled' : props.readonly === true ? ' q-date--readonly' : '');\n    });\n    const computedColor = computed(() => {\n      return props.color || 'primary';\n    });\n    const computedTextColor = computed(() => {\n      return props.textColor || 'white';\n    });\n    const isImmediate = computed(() => props.emitImmediately === true && props.multiple !== true && props.range !== true);\n    const normalizedModel = computed(() => Array.isArray(props.modelValue) === true ? props.modelValue : props.modelValue !== null && props.modelValue !== void 0 ? [props.modelValue] : []);\n    const daysModel = computed(() => normalizedModel.value.filter(date => typeof date === 'string').map(date => decodeString(date, innerMask.value, innerLocale.value)).filter(date => date.dateHash !== null && date.day !== null && date.month !== null && date.year !== null));\n    const rangeModel = computed(() => {\n      const fn = date => decodeString(date, innerMask.value, innerLocale.value);\n      return normalizedModel.value.filter(date => isObject(date) === true && date.from !== void 0 && date.to !== void 0).map(range => ({\n        from: fn(range.from),\n        to: fn(range.to)\n      })).filter(range => range.from.dateHash !== null && range.to.dateHash !== null && range.from.dateHash < range.to.dateHash);\n    });\n    const getNativeDateFn = computed(() => props.calendar !== 'persian' ? model => new Date(model.year, model.month - 1, model.day) : model => {\n      const gDate = toGregorian(model.year, model.month, model.day);\n      return new Date(gDate.gy, gDate.gm - 1, gDate.gd);\n    });\n    const encodeObjectFn = computed(() => props.calendar === 'persian' ? getDayHash : (date, mask, locale) => formatDate(new Date(date.year, date.month - 1, date.day, date.hour, date.minute, date.second, date.millisecond), mask === void 0 ? innerMask.value : mask, locale === void 0 ? innerLocale.value : locale, date.year, date.timezoneOffset));\n    const daysInModel = computed(() => daysModel.value.length + rangeModel.value.reduce((acc, range) => acc + 1 + getDateDiff(getNativeDateFn.value(range.to), getNativeDateFn.value(range.from)), 0));\n    const headerTitle = computed(() => {\n      if (props.title !== void 0 && props.title !== null && props.title.length !== 0) {\n        return props.title;\n      }\n      if (editRange.value !== null) {\n        const model = editRange.value.init;\n        const date = getNativeDateFn.value(model);\n        return innerLocale.value.daysShort[date.getDay()] + ', ' + innerLocale.value.monthsShort[model.month - 1] + ' ' + model.day + lineStr + '?';\n      }\n      if (daysInModel.value === 0) {\n        return lineStr;\n      }\n      if (daysInModel.value > 1) {\n        return `${daysInModel.value} ${innerLocale.value.pluralDay}`;\n      }\n      const model = daysModel.value[0];\n      const date = getNativeDateFn.value(model);\n      if (isNaN(date.valueOf()) === true) {\n        return lineStr;\n      }\n      if (innerLocale.value.headerTitle !== void 0) {\n        return innerLocale.value.headerTitle(date, model);\n      }\n      return innerLocale.value.daysShort[date.getDay()] + ', ' + innerLocale.value.monthsShort[model.month - 1] + ' ' + model.day;\n    });\n    const minSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.from)).sort((a, b) => a.year - b.year || a.month - b.month);\n      return model[0];\n    });\n    const maxSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.to)).sort((a, b) => b.year - a.year || b.month - a.month);\n      return model[0];\n    });\n    const headerSubtitle = computed(() => {\n      if (props.subtitle !== void 0 && props.subtitle !== null && props.subtitle.length !== 0) {\n        return props.subtitle;\n      }\n      if (daysInModel.value === 0) {\n        return lineStr;\n      }\n      if (daysInModel.value > 1) {\n        const from = minSelectedModel.value;\n        const to = maxSelectedModel.value;\n        const month = innerLocale.value.monthsShort;\n        return month[from.month - 1] + (from.year !== to.year ? ' ' + from.year + lineStr + month[to.month - 1] + ' ' : from.month !== to.month ? lineStr + month[to.month - 1] : '') + ' ' + to.year;\n      }\n      return daysModel.value[0].year;\n    });\n    const dateArrow = computed(() => {\n      const val = [$q.iconSet.datetime.arrowLeft, $q.iconSet.datetime.arrowRight];\n      return $q.lang.rtl === true ? val.reverse() : val;\n    });\n    const computedFirstDayOfWeek = computed(() => props.firstDayOfWeek !== void 0 ? Number(props.firstDayOfWeek) : innerLocale.value.firstDayOfWeek);\n    const daysOfWeek = computed(() => {\n      const days = innerLocale.value.daysShort,\n        first = computedFirstDayOfWeek.value;\n      return first > 0 ? days.slice(first, 7).concat(days.slice(0, first)) : days;\n    });\n    const daysInMonth = computed(() => {\n      const date = viewModel.value;\n      return props.calendar !== 'persian' ? new Date(date.year, date.month, 0).getDate() : jalaaliMonthLength(date.year, date.month);\n    });\n    const evtColor = computed(() => typeof props.eventColor === 'function' ? props.eventColor : () => props.eventColor);\n    const minNav = computed(() => {\n      if (props.navigationMinYearMonth === void 0) {\n        return null;\n      }\n      const data = props.navigationMinYearMonth.split('/');\n      return {\n        year: parseInt(data[0], 10),\n        month: parseInt(data[1], 10)\n      };\n    });\n    const maxNav = computed(() => {\n      if (props.navigationMaxYearMonth === void 0) {\n        return null;\n      }\n      const data = props.navigationMaxYearMonth.split('/');\n      return {\n        year: parseInt(data[0], 10),\n        month: parseInt(data[1], 10)\n      };\n    });\n    const navBoundaries = computed(() => {\n      const data = {\n        month: {\n          prev: true,\n          next: true\n        },\n        year: {\n          prev: true,\n          next: true\n        }\n      };\n      if (minNav.value !== null && minNav.value.year >= viewModel.value.year) {\n        data.year.prev = false;\n        if (minNav.value.year === viewModel.value.year && minNav.value.month >= viewModel.value.month) {\n          data.month.prev = false;\n        }\n      }\n      if (maxNav.value !== null && maxNav.value.year <= viewModel.value.year) {\n        data.year.next = false;\n        if (maxNav.value.year === viewModel.value.year && maxNav.value.month <= viewModel.value.month) {\n          data.month.next = false;\n        }\n      }\n      return data;\n    });\n    const daysMap = computed(() => {\n      const map = {};\n      daysModel.value.forEach(entry => {\n        const hash = getMonthHash(entry);\n        if (map[hash] === void 0) {\n          map[hash] = [];\n        }\n        map[hash].push(entry.day);\n      });\n      return map;\n    });\n    const rangeMap = computed(() => {\n      const map = {};\n      rangeModel.value.forEach(entry => {\n        const hashFrom = getMonthHash(entry.from);\n        const hashTo = getMonthHash(entry.to);\n        if (map[hashFrom] === void 0) {\n          map[hashFrom] = [];\n        }\n        map[hashFrom].push({\n          from: entry.from.day,\n          to: hashFrom === hashTo ? entry.to.day : void 0,\n          range: entry\n        });\n        if (hashFrom < hashTo) {\n          let hash;\n          const {\n            year,\n            month\n          } = entry.from;\n          const cur = month < 12 ? {\n            year,\n            month: month + 1\n          } : {\n            year: year + 1,\n            month: 1\n          };\n          while ((hash = getMonthHash(cur)) <= hashTo) {\n            if (map[hash] === void 0) {\n              map[hash] = [];\n            }\n            map[hash].push({\n              from: void 0,\n              to: hash === hashTo ? entry.to.day : void 0,\n              range: entry\n            });\n            cur.month++;\n            if (cur.month > 12) {\n              cur.year++;\n              cur.month = 1;\n            }\n          }\n        }\n      });\n      return map;\n    });\n    const rangeView = computed(() => {\n      if (editRange.value === null) {\n        return;\n      }\n      const {\n        init,\n        initHash,\n        final,\n        finalHash\n      } = editRange.value;\n      const [from, to] = initHash <= finalHash ? [init, final] : [final, init];\n      const fromHash = getMonthHash(from);\n      const toHash = getMonthHash(to);\n      if (fromHash !== viewMonthHash.value && toHash !== viewMonthHash.value) {\n        return;\n      }\n      const view = {};\n      if (fromHash === viewMonthHash.value) {\n        view.from = from.day;\n        view.includeFrom = true;\n      } else {\n        view.from = 1;\n      }\n      if (toHash === viewMonthHash.value) {\n        view.to = to.day;\n        view.includeTo = true;\n      } else {\n        view.to = daysInMonth.value;\n      }\n      return view;\n    });\n    const viewMonthHash = computed(() => getMonthHash(viewModel.value));\n    const selectionDaysMap = computed(() => {\n      const map = {};\n      if (props.options === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[i] = true;\n        }\n        return map;\n      }\n      const fn = typeof props.options === 'function' ? props.options : date => props.options.includes(date);\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const dayHash = viewMonthHash.value + '/' + pad(i);\n        map[i] = fn(dayHash);\n      }\n      return map;\n    });\n    const eventDaysMap = computed(() => {\n      const map = {};\n      if (props.events === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[i] = false;\n        }\n      } else {\n        const fn = typeof props.events === 'function' ? props.events : date => props.events.includes(date);\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          const dayHash = viewMonthHash.value + '/' + pad(i);\n          map[i] = fn(dayHash) === true && evtColor.value(dayHash);\n        }\n      }\n      return map;\n    });\n    const viewDays = computed(() => {\n      let date, endDay;\n      const {\n        year,\n        month\n      } = viewModel.value;\n      if (props.calendar !== 'persian') {\n        date = new Date(year, month - 1, 1);\n        endDay = new Date(year, month - 1, 0).getDate();\n      } else {\n        const gDate = toGregorian(year, month, 1);\n        date = new Date(gDate.gy, gDate.gm - 1, gDate.gd);\n        let prevJM = month - 1;\n        let prevJY = year;\n        if (prevJM === 0) {\n          prevJM = 12;\n          prevJY--;\n        }\n        endDay = jalaaliMonthLength(prevJY, prevJM);\n      }\n      return {\n        days: date.getDay() - computedFirstDayOfWeek.value - 1,\n        endDay\n      };\n    });\n    const days = computed(() => {\n      const res = [];\n      const {\n        days,\n        endDay\n      } = viewDays.value;\n      const len = days < 0 ? days + 7 : days;\n      if (len < 6) {\n        for (let i = endDay - len; i <= endDay; i++) {\n          res.push({\n            i,\n            fill: true\n          });\n        }\n      }\n      const index = res.length;\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const day = {\n          i,\n          event: eventDaysMap.value[i],\n          classes: []\n        };\n        if (selectionDaysMap.value[i] === true) {\n          day.in = true;\n          day.flat = true;\n        }\n        res.push(day);\n      }\n\n      // if current view has days in model\n      if (daysMap.value[viewMonthHash.value] !== void 0) {\n        daysMap.value[viewMonthHash.value].forEach(day => {\n          const i = index + day - 1;\n          Object.assign(res[i], {\n            selected: true,\n            unelevated: true,\n            flat: false,\n            color: computedColor.value,\n            textColor: computedTextColor.value\n          });\n        });\n      }\n\n      // if current view has ranges in model\n      if (rangeMap.value[viewMonthHash.value] !== void 0) {\n        rangeMap.value[viewMonthHash.value].forEach(entry => {\n          if (entry.from !== void 0) {\n            const from = index + entry.from - 1;\n            const to = index + (entry.to || daysInMonth.value) - 1;\n            for (let day = from; day <= to; day++) {\n              Object.assign(res[day], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              });\n            }\n            Object.assign(res[from], {\n              rangeFrom: true,\n              flat: false\n            });\n            entry.to !== void 0 && Object.assign(res[to], {\n              rangeTo: true,\n              flat: false\n            });\n          } else if (entry.to !== void 0) {\n            const to = index + entry.to - 1;\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[day], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              });\n            }\n            Object.assign(res[to], {\n              flat: false,\n              rangeTo: true\n            });\n          } else {\n            const to = index + daysInMonth.value - 1;\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[day], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              });\n            }\n          }\n        });\n      }\n      if (rangeView.value !== void 0) {\n        const from = index + rangeView.value.from - 1;\n        const to = index + rangeView.value.to - 1;\n        for (let day = from; day <= to; day++) {\n          res[day].color = computedColor.value;\n          res[day].editRange = true;\n        }\n        if (rangeView.value.includeFrom === true) {\n          res[from].editRangeFrom = true;\n        }\n        if (rangeView.value.includeTo === true) {\n          res[to].editRangeTo = true;\n        }\n      }\n      if (viewModel.value.year === today.value.year && viewModel.value.month === today.value.month) {\n        res[index + today.value.day - 1].today = true;\n      }\n      const left = res.length % 7;\n      if (left > 0) {\n        const afterDays = 7 - left;\n        for (let i = 1; i <= afterDays; i++) {\n          res.push({\n            i,\n            fill: true\n          });\n        }\n      }\n      res.forEach(day => {\n        let cls = 'q-date__calendar-item ';\n        if (day.fill === true) {\n          cls += 'q-date__calendar-item--fill';\n        } else {\n          cls += `q-date__calendar-item--${day.in === true ? 'in' : 'out'}`;\n          if (day.range !== void 0) {\n            cls += ` q-date__range${day.rangeTo === true ? '-to' : day.rangeFrom === true ? '-from' : ''}`;\n          }\n          if (day.editRange === true) {\n            cls += ` q-date__edit-range${day.editRangeFrom === true ? '-from' : ''}${day.editRangeTo === true ? '-to' : ''}`;\n          }\n          if (day.range !== void 0 || day.editRange === true) {\n            cls += ` text-${day.color}`;\n          }\n        }\n        day.classes = cls;\n      });\n      return res;\n    });\n    const attributes = computed(() => props.disable === true ? {\n      'aria-disabled': 'true'\n    } : props.readonly === true ? {\n      'aria-readonly': 'true'\n    } : {});\n    watch(() => props.modelValue, v => {\n      if (lastEmitValue === v) {\n        lastEmitValue = 0;\n      } else {\n        const model = getViewModel(innerMask.value, innerLocale.value);\n        updateViewModel(model.year, model.month, model);\n      }\n    });\n    watch(view, () => {\n      if (blurTargetRef.value !== null && proxy.$el.contains(document.activeElement) === true) {\n        blurTargetRef.value.focus();\n      }\n    });\n    watch(() => viewModel.value.year + '|' + viewModel.value.month, () => {\n      emit('navigation', {\n        year: viewModel.value.year,\n        month: viewModel.value.month\n      });\n    });\n    watch(mask, val => {\n      updateValue(val, innerLocale.value, 'mask');\n      innerMask.value = val;\n    });\n    watch(locale, val => {\n      updateValue(innerMask.value, val, 'locale');\n      innerLocale.value = val;\n    });\n    function setToday() {\n      const date = today.value;\n      const month = daysMap.value[getMonthHash(date)];\n      if (month === void 0 || month.includes(date.day) === false) {\n        addToModel(date);\n      }\n      setCalendarTo(date.year, date.month);\n    }\n    function setView(viewMode) {\n      if (viewIsValid(viewMode) === true) {\n        view.value = viewMode;\n      }\n    }\n    function offsetCalendar(type, descending) {\n      if (['month', 'year'].includes(type)) {\n        const fn = type === 'month' ? goToMonth : goToYear;\n        fn(descending === true ? -1 : 1);\n      }\n    }\n    function setCalendarTo(year, month) {\n      view.value = 'Calendar';\n      updateViewModel(year, month);\n    }\n    function setEditingRange(from, to) {\n      if (props.range === false || !from) {\n        editRange.value = null;\n        return;\n      }\n      const init = Object.assign({\n        ...viewModel.value\n      }, from);\n      const final = to !== void 0 ? Object.assign({\n        ...viewModel.value\n      }, to) : init;\n      editRange.value = {\n        init,\n        initHash: getDayHash(init),\n        final,\n        finalHash: getDayHash(final)\n      };\n      setCalendarTo(init.year, init.month);\n    }\n    function getMask() {\n      return props.calendar === 'persian' ? 'YYYY/MM/DD' : props.mask;\n    }\n    function decodeString(date, mask, locale) {\n      return __splitDate(date, mask, locale, props.calendar, {\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0\n      });\n    }\n    function getViewModel(mask, locale) {\n      const model = Array.isArray(props.modelValue) === true ? props.modelValue : props.modelValue ? [props.modelValue] : [];\n      if (model.length === 0) {\n        return getDefaultViewModel();\n      }\n      const target = model[model.length - 1];\n      const decoded = decodeString(target.from !== void 0 ? target.from : target, mask, locale);\n      return decoded.dateHash === null ? getDefaultViewModel() : decoded;\n    }\n    function getDefaultViewModel() {\n      let year, month;\n      if (props.defaultYearMonth !== void 0) {\n        const d = props.defaultYearMonth.split('/');\n        year = parseInt(d[0], 10);\n        month = parseInt(d[1], 10);\n      } else {\n        // may come from data() where computed\n        // props are not yet available\n        const d = today.value !== void 0 ? today.value : getCurrentDate();\n        year = d.year;\n        month = d.month;\n      }\n      return {\n        year,\n        month,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        dateHash: year + '/' + pad(month) + '/01'\n      };\n    }\n    function goToMonth(offset) {\n      let year = viewModel.value.year;\n      let month = Number(viewModel.value.month) + offset;\n      if (month === 13) {\n        month = 1;\n        year++;\n      } else if (month === 0) {\n        month = 12;\n        year--;\n      }\n      updateViewModel(year, month);\n      isImmediate.value === true && emitImmediately('month');\n    }\n    function goToYear(offset) {\n      const year = Number(viewModel.value.year) + offset;\n      updateViewModel(year, viewModel.value.month);\n      isImmediate.value === true && emitImmediately('year');\n    }\n    function setYear(year) {\n      updateViewModel(year, viewModel.value.month);\n      view.value = props.defaultView === 'Years' ? 'Months' : 'Calendar';\n      isImmediate.value === true && emitImmediately('year');\n    }\n    function setMonth(month) {\n      updateViewModel(viewModel.value.year, month);\n      view.value = 'Calendar';\n      isImmediate.value === true && emitImmediately('month');\n    }\n    function toggleDate(date, monthHash) {\n      const month = daysMap.value[monthHash];\n      const fn = month !== void 0 && month.includes(date.day) === true ? removeFromModel : addToModel;\n      fn(date);\n    }\n    function getShortDate(date) {\n      return {\n        year: date.year,\n        month: date.month,\n        day: date.day\n      };\n    }\n    function updateViewModel(year, month, time) {\n      if (minNav.value !== null && year <= minNav.value.year) {\n        year = minNav.value.year;\n        if (month < minNav.value.month) {\n          month = minNav.value.month;\n        }\n      }\n      if (maxNav.value !== null && year >= maxNav.value.year) {\n        year = maxNav.value.year;\n        if (month > maxNav.value.month) {\n          month = maxNav.value.month;\n        }\n      }\n      if (time !== void 0) {\n        const {\n          hour,\n          minute,\n          second,\n          millisecond,\n          timezoneOffset,\n          timeHash\n        } = time;\n        Object.assign(viewModel.value, {\n          hour,\n          minute,\n          second,\n          millisecond,\n          timezoneOffset,\n          timeHash\n        });\n      }\n      const newHash = year + '/' + pad(month) + '/01';\n      if (newHash !== viewModel.value.dateHash) {\n        monthDirection.value = viewModel.value.dateHash < newHash === ($q.lang.rtl !== true) ? 'left' : 'right';\n        if (year !== viewModel.value.year) {\n          yearDirection.value = monthDirection.value;\n        }\n        nextTick(() => {\n          startYear.value = year - year % yearsInterval - (year < 0 ? yearsInterval : 0);\n          Object.assign(viewModel.value, {\n            year,\n            month,\n            day: 1,\n            dateHash: newHash\n          });\n        });\n      }\n    }\n    function emitValue(val, action, date) {\n      const value = val !== null && val.length === 1 && props.multiple === false ? val[0] : val;\n      lastEmitValue = value;\n      const {\n        reason,\n        details\n      } = getEmitParams(action, date);\n      emit('update:modelValue', value, reason, details);\n    }\n    function emitImmediately(reason) {\n      const date = daysModel.value[0] !== void 0 && daysModel.value[0].dateHash !== null ? {\n        ...daysModel.value[0]\n      } : {\n        ...viewModel.value\n      }; // inherit day, hours, minutes, milliseconds...\n\n      // nextTick required because of animation delay in viewModel\n      nextTick(() => {\n        date.year = viewModel.value.year;\n        date.month = viewModel.value.month;\n        const maxDay = props.calendar !== 'persian' ? new Date(date.year, date.month, 0).getDate() : jalaaliMonthLength(date.year, date.month);\n        date.day = Math.min(Math.max(1, date.day), maxDay);\n        const value = encodeEntry(date);\n        lastEmitValue = value;\n        const {\n          details\n        } = getEmitParams('', date);\n        emit('update:modelValue', value, reason, details);\n      });\n    }\n    function getEmitParams(action, date) {\n      return date.from !== void 0 ? {\n        reason: `${action}-range`,\n        details: {\n          ...getShortDate(date.target),\n          from: getShortDate(date.from),\n          to: getShortDate(date.to)\n        }\n      } : {\n        reason: `${action}-day`,\n        details: getShortDate(date)\n      };\n    }\n    function encodeEntry(date, mask, locale) {\n      return date.from !== void 0 ? {\n        from: encodeObjectFn.value(date.from, mask, locale),\n        to: encodeObjectFn.value(date.to, mask, locale)\n      } : encodeObjectFn.value(date, mask, locale);\n    }\n    function addToModel(date) {\n      let value;\n      if (props.multiple === true) {\n        if (date.from !== void 0) {\n          // we also need to filter out intersections\n\n          const fromHash = getDayHash(date.from);\n          const toHash = getDayHash(date.to);\n          const days = daysModel.value.filter(day => day.dateHash < fromHash || day.dateHash > toHash);\n          const ranges = rangeModel.value.filter(({\n            from,\n            to\n          }) => to.dateHash < fromHash || from.dateHash > toHash);\n          value = days.concat(ranges).concat(date).map(entry => encodeEntry(entry));\n        } else {\n          const model = normalizedModel.value.slice();\n          model.push(encodeEntry(date));\n          value = model;\n        }\n      } else {\n        value = encodeEntry(date);\n      }\n      emitValue(value, 'add', date);\n    }\n    function removeFromModel(date) {\n      if (props.noUnset === true) {\n        return;\n      }\n      let model = null;\n      if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n        const val = encodeEntry(date);\n        if (date.from !== void 0) {\n          model = props.modelValue.filter(date => date.from !== void 0 ? date.from !== val.from && date.to !== val.to : true);\n        } else {\n          model = props.modelValue.filter(date => date !== val);\n        }\n        if (model.length === 0) {\n          model = null;\n        }\n      }\n      emitValue(model, 'remove', date);\n    }\n    function updateValue(mask, locale, reason) {\n      const model = daysModel.value.concat(rangeModel.value).map(entry => encodeEntry(entry, mask, locale)).filter(entry => {\n        return entry.from !== void 0 ? entry.from.dateHash !== null && entry.to.dateHash !== null : entry.dateHash !== null;\n      });\n      emit('update:modelValue', (props.multiple === true ? model : model[0]) || null, reason);\n    }\n    function getHeader() {\n      if (props.minimal === true) {\n        return;\n      }\n      return h('div', {\n        class: 'q-date__header ' + headerClass.value\n      }, [h('div', {\n        class: 'relative-position'\n      }, [h(Transition, {\n        name: 'q-transition--fade'\n      }, () => h('div', {\n        key: 'h-yr-' + headerSubtitle.value,\n        class: 'q-date__header-subtitle q-date__header-link ' + (view.value === 'Years' ? 'q-date__header-link--active' : 'cursor-pointer'),\n        tabindex: tabindex.value,\n        ...getCache('vY', {\n          onClick() {\n            view.value = 'Years';\n          },\n          onKeyup(e) {\n            e.keyCode === 13 && (view.value = 'Years');\n          }\n        })\n      }, [headerSubtitle.value]))]), h('div', {\n        class: 'q-date__header-title relative-position flex no-wrap'\n      }, [h('div', {\n        class: 'relative-position col'\n      }, [h(Transition, {\n        name: 'q-transition--fade'\n      }, () => h('div', {\n        key: 'h-sub' + headerTitle.value,\n        class: 'q-date__header-title-label q-date__header-link ' + (view.value === 'Calendar' ? 'q-date__header-link--active' : 'cursor-pointer'),\n        tabindex: tabindex.value,\n        ...getCache('vC', {\n          onClick() {\n            view.value = 'Calendar';\n          },\n          onKeyup(e) {\n            e.keyCode === 13 && (view.value = 'Calendar');\n          }\n        })\n      }, [headerTitle.value]))]), props.todayBtn === true ? h(QBtn, {\n        class: 'q-date__header-today self-start',\n        icon: $q.iconSet.datetime.today,\n        flat: true,\n        size: 'sm',\n        round: true,\n        tabindex: tabindex.value,\n        onClick: setToday\n      }) : null])]);\n    }\n    function getNavigation({\n      label,\n      type,\n      key,\n      dir,\n      goTo,\n      boundaries,\n      cls\n    }) {\n      return [h('div', {\n        class: 'row items-center q-date__arrow'\n      }, [h(QBtn, {\n        round: true,\n        dense: true,\n        size: 'sm',\n        flat: true,\n        icon: dateArrow.value[0],\n        tabindex: tabindex.value,\n        disable: boundaries.prev === false,\n        ...getCache('go-#' + type, {\n          onClick() {\n            goTo(-1);\n          }\n        })\n      })]), h('div', {\n        class: 'relative-position overflow-hidden flex flex-center' + cls\n      }, [h(Transition, {\n        name: 'q-transition--jump-' + dir\n      }, () => h('div', {\n        key\n      }, [h(QBtn, {\n        flat: true,\n        dense: true,\n        noCaps: true,\n        label,\n        tabindex: tabindex.value,\n        ...getCache('view#' + type, {\n          onClick: () => {\n            view.value = type;\n          }\n        })\n      })]))]), h('div', {\n        class: 'row items-center q-date__arrow'\n      }, [h(QBtn, {\n        round: true,\n        dense: true,\n        size: 'sm',\n        flat: true,\n        icon: dateArrow.value[1],\n        tabindex: tabindex.value,\n        disable: boundaries.next === false,\n        ...getCache('go+#' + type, {\n          onClick() {\n            goTo(1);\n          }\n        })\n      })])];\n    }\n    const renderViews = {\n      Calendar: () => [h('div', {\n        key: 'calendar-view',\n        class: 'q-date__view q-date__calendar'\n      }, [h('div', {\n        class: 'q-date__navigation row items-center no-wrap'\n      }, getNavigation({\n        label: innerLocale.value.months[viewModel.value.month - 1],\n        type: 'Months',\n        key: viewModel.value.month,\n        dir: monthDirection.value,\n        goTo: goToMonth,\n        boundaries: navBoundaries.value.month,\n        cls: ' col'\n      }).concat(getNavigation({\n        label: viewModel.value.year,\n        type: 'Years',\n        key: viewModel.value.year,\n        dir: yearDirection.value,\n        goTo: goToYear,\n        boundaries: navBoundaries.value.year,\n        cls: ''\n      }))), h('div', {\n        class: 'q-date__calendar-weekdays row items-center no-wrap'\n      }, daysOfWeek.value.map(day => h('div', {\n        class: 'q-date__calendar-item'\n      }, [h('div', day)]))), h('div', {\n        class: 'q-date__calendar-days-container relative-position overflow-hidden'\n      }, [h(Transition, {\n        name: 'q-transition--slide-' + monthDirection.value\n      }, () => h('div', {\n        key: viewMonthHash.value,\n        class: 'q-date__calendar-days fit'\n      }, days.value.map(day => h('div', {\n        class: day.classes\n      }, [day.in === true ? h(QBtn, {\n        class: day.today === true ? 'q-date__today' : '',\n        dense: true,\n        flat: day.flat,\n        unelevated: day.unelevated,\n        color: day.color,\n        textColor: day.textColor,\n        label: day.i,\n        tabindex: tabindex.value,\n        ...getCache('day#' + day.i, {\n          onClick: () => {\n            onDayClick(day.i);\n          },\n          onMouseover: () => {\n            onDayMouseover(day.i);\n          }\n        })\n      }, day.event !== false ? () => h('div', {\n        class: 'q-date__event bg-' + day.event\n      }) : null) : h('div', '' + day.i)]))))])])],\n      Months() {\n        const currentYear = viewModel.value.year === today.value.year;\n        const isDisabled = month => {\n          return minNav.value !== null && viewModel.value.year === minNav.value.year && minNav.value.month > month || maxNav.value !== null && viewModel.value.year === maxNav.value.year && maxNav.value.month < month;\n        };\n        const content = innerLocale.value.monthsShort.map((month, i) => {\n          const active = viewModel.value.month === i + 1;\n          return h('div', {\n            class: 'q-date__months-item flex flex-center'\n          }, [h(QBtn, {\n            class: currentYear === true && today.value.month === i + 1 ? 'q-date__today' : null,\n            flat: active !== true,\n            label: month,\n            unelevated: active,\n            color: active === true ? computedColor.value : null,\n            textColor: active === true ? computedTextColor.value : null,\n            tabindex: tabindex.value,\n            disable: isDisabled(i + 1),\n            ...getCache('month#' + i, {\n              onClick: () => {\n                setMonth(i + 1);\n              }\n            })\n          })]);\n        });\n        props.yearsInMonthView === true && content.unshift(h('div', {\n          class: 'row no-wrap full-width'\n        }, [getNavigation({\n          label: viewModel.value.year,\n          type: 'Years',\n          key: viewModel.value.year,\n          dir: yearDirection.value,\n          goTo: goToYear,\n          boundaries: navBoundaries.value.year,\n          cls: ' col'\n        })]));\n        return h('div', {\n          key: 'months-view',\n          class: 'q-date__view q-date__months flex flex-center'\n        }, content);\n      },\n      Years() {\n        const start = startYear.value,\n          stop = start + yearsInterval,\n          years = [];\n        const isDisabled = year => {\n          return minNav.value !== null && minNav.value.year > year || maxNav.value !== null && maxNav.value.year < year;\n        };\n        for (let i = start; i <= stop; i++) {\n          const active = viewModel.value.year === i;\n          years.push(h('div', {\n            class: 'q-date__years-item flex flex-center'\n          }, [h(QBtn, {\n            key: 'yr' + i,\n            class: today.value.year === i ? 'q-date__today' : null,\n            flat: !active,\n            label: i,\n            dense: true,\n            unelevated: active,\n            color: active === true ? computedColor.value : null,\n            textColor: active === true ? computedTextColor.value : null,\n            tabindex: tabindex.value,\n            disable: isDisabled(i),\n            ...getCache('yr#' + i, {\n              onClick: () => {\n                setYear(i);\n              }\n            })\n          })]));\n        }\n        return h('div', {\n          class: 'q-date__view q-date__years flex flex-center'\n        }, [h('div', {\n          class: 'col-auto'\n        }, [h(QBtn, {\n          round: true,\n          dense: true,\n          flat: true,\n          icon: dateArrow.value[0],\n          tabindex: tabindex.value,\n          disable: isDisabled(start),\n          ...getCache('y-', {\n            onClick: () => {\n              startYear.value -= yearsInterval;\n            }\n          })\n        })]), h('div', {\n          class: 'q-date__years-content col self-stretch row items-center'\n        }, years), h('div', {\n          class: 'col-auto'\n        }, [h(QBtn, {\n          round: true,\n          dense: true,\n          flat: true,\n          icon: dateArrow.value[1],\n          tabindex: tabindex.value,\n          disable: isDisabled(stop),\n          ...getCache('y+', {\n            onClick: () => {\n              startYear.value += yearsInterval;\n            }\n          })\n        })])]);\n      }\n    };\n    function onDayClick(dayIndex) {\n      const day = {\n        ...viewModel.value,\n        day: dayIndex\n      };\n      if (props.range === false) {\n        toggleDate(day, viewMonthHash.value);\n        return;\n      }\n      if (editRange.value === null) {\n        const dayProps = days.value.find(day => day.fill !== true && day.i === dayIndex);\n        if (props.noUnset !== true && dayProps.range !== void 0) {\n          removeFromModel({\n            target: day,\n            from: dayProps.range.from,\n            to: dayProps.range.to\n          });\n          return;\n        }\n        if (dayProps.selected === true) {\n          removeFromModel(day);\n          return;\n        }\n        const initHash = getDayHash(day);\n        editRange.value = {\n          init: day,\n          initHash,\n          final: day,\n          finalHash: initHash\n        };\n        emit('rangeStart', getShortDate(day));\n      } else {\n        const initHash = editRange.value.initHash,\n          finalHash = getDayHash(day),\n          payload = initHash <= finalHash ? {\n            from: editRange.value.init,\n            to: day\n          } : {\n            from: day,\n            to: editRange.value.init\n          };\n        editRange.value = null;\n        addToModel(initHash === finalHash ? day : {\n          target: day,\n          ...payload\n        });\n        emit('rangeEnd', {\n          from: getShortDate(payload.from),\n          to: getShortDate(payload.to)\n        });\n      }\n    }\n    function onDayMouseover(dayIndex) {\n      if (editRange.value !== null) {\n        const final = {\n          ...viewModel.value,\n          day: dayIndex\n        };\n        Object.assign(editRange.value, {\n          final,\n          finalHash: getDayHash(final)\n        });\n      }\n    }\n\n    // expose public methods\n    Object.assign(proxy, {\n      setToday,\n      setView,\n      offsetCalendar,\n      setCalendarTo,\n      setEditingRange\n    });\n    return () => {\n      const content = [h('div', {\n        class: 'q-date__content col relative-position'\n      }, [h(Transition, {\n        name: 'q-transition--fade'\n      }, renderViews[view.value])])];\n      const def = hSlot(slots.default);\n      def !== void 0 && content.push(h('div', {\n        class: 'q-date__actions'\n      }, def));\n      if (props.name !== void 0 && props.disable !== true) {\n        injectFormInput(content, 'push');\n      }\n      return h('div', {\n        class: classes.value,\n        ...attributes.value\n      }, [getHeader(), h('div', {\n        ref: blurTargetRef,\n        class: 'q-date__main col column',\n        tabindex: -1\n      }, content)]);\n    };\n  }\n});","map":{"version":3,"names":["h","ref","computed","watch","Transition","nextTick","getCurrentInstance","QBtn","useDark","useDarkProps","useCache","useFormProps","useFormAttrs","useFormInject","useDatetime","useDatetimeProps","useDatetimeEmits","getDayHash","createComponent","hSlot","formatDate","__splitDate","getDateDiff","pad","jalaaliMonthLength","toGregorian","isObject","yearsInterval","views","viewIsValid","v","includes","yearMonthValidator","test","lineStr","getMonthHash","date","year","month","name","props","multiple","Boolean","range","title","String","subtitle","mask","default","defaultYearMonth","type","validator","yearsInMonthView","events","Array","Function","eventColor","emitImmediately","options","navigationMinYearMonth","navigationMaxYearMonth","noUnset","firstDayOfWeek","Number","todayBtn","minimal","defaultView","emits","setup","slots","emit","proxy","$q","isDark","getCache","tabindex","headerClass","getLocale","getCurrentDate","lastEmitValue","formAttrs","injectFormInput","blurTargetRef","innerMask","getMask","innerLocale","locale","today","viewModel","getViewModel","value","view","direction","lang","rtl","monthDirection","yearDirection","startYear","editRange","classes","landscape","bordered","square","flat","disable","readonly","computedColor","color","computedTextColor","textColor","isImmediate","normalizedModel","isArray","modelValue","daysModel","filter","map","decodeString","dateHash","day","rangeModel","fn","from","to","getNativeDateFn","calendar","model","Date","gDate","gy","gm","gd","encodeObjectFn","hour","minute","second","millisecond","timezoneOffset","daysInModel","length","reduce","acc","headerTitle","init","daysShort","getDay","monthsShort","pluralDay","isNaN","valueOf","minSelectedModel","concat","sort","a","b","maxSelectedModel","headerSubtitle","dateArrow","val","iconSet","datetime","arrowLeft","arrowRight","reverse","computedFirstDayOfWeek","daysOfWeek","days","first","slice","daysInMonth","getDate","evtColor","minNav","data","split","parseInt","maxNav","navBoundaries","prev","next","daysMap","forEach","entry","hash","push","rangeMap","hashFrom","hashTo","cur","rangeView","initHash","final","finalHash","fromHash","toHash","viewMonthHash","includeFrom","includeTo","selectionDaysMap","i","dayHash","eventDaysMap","viewDays","endDay","prevJM","prevJY","res","len","fill","index","event","in","Object","assign","selected","unelevated","rangeFrom","rangeTo","editRangeFrom","editRangeTo","left","afterDays","cls","attributes","updateViewModel","$el","contains","document","activeElement","focus","updateValue","setToday","addToModel","setCalendarTo","setView","viewMode","offsetCalendar","descending","goToMonth","goToYear","setEditingRange","getDefaultViewModel","target","decoded","d","offset","setYear","setMonth","toggleDate","monthHash","removeFromModel","getShortDate","time","timeHash","newHash","emitValue","action","reason","details","getEmitParams","maxDay","Math","min","max","encodeEntry","ranges","getHeader","class","key","onClick","onKeyup","e","keyCode","icon","size","round","getNavigation","label","dir","goTo","boundaries","dense","noCaps","renderViews","Calendar","months","onDayClick","onMouseover","onDayMouseover","Months","currentYear","isDisabled","content","active","unshift","Years","start","stop","years","dayIndex","dayProps","find","payload","def"],"sources":["C:/Users/user/OneDrive/Desktop/HiyasProject/node_modules/quasar/src/components/date/QDate.js"],"sourcesContent":["import { h, ref, computed, watch, Transition, nextTick, getCurrentInstance } from 'vue'\n\nimport QBtn from '../btn/QBtn.js'\n\nimport useDark, { useDarkProps } from '../../composables/private/use-dark.js'\nimport useCache from '../../composables/private/use-cache.js'\nimport { useFormProps, useFormAttrs, useFormInject } from '../../composables/private/use-form.js'\nimport useDatetime, { useDatetimeProps, useDatetimeEmits, getDayHash } from './use-datetime.js'\n\nimport { createComponent } from '../../utils/private/create.js'\nimport { hSlot } from '../../utils/private/render.js'\nimport { formatDate, __splitDate, getDateDiff } from '../../utils/date.js'\nimport { pad } from '../../utils/format.js'\nimport { jalaaliMonthLength, toGregorian } from '../../utils/private/date-persian.js'\nimport { isObject } from '../../utils/is.js'\n\nconst yearsInterval = 20\nconst views = [ 'Calendar', 'Years', 'Months' ]\nconst viewIsValid = v => views.includes(v)\nconst yearMonthValidator = v => /^-?[\\d]+\\/[0-1]\\d$/.test(v)\nconst lineStr = ' \\u2014 '\n\nfunction getMonthHash (date) {\n  return date.year + '/' + pad(date.month)\n}\n\nexport default createComponent({\n  name: 'QDate',\n\n  props: {\n    ...useDatetimeProps,\n    ...useFormProps,\n    ...useDarkProps,\n\n    multiple: Boolean,\n    range: Boolean,\n\n    title: String,\n    subtitle: String,\n\n    mask: {\n      // this mask is forced\n      // when using persian calendar\n      default: 'YYYY/MM/DD'\n    },\n\n    defaultYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    yearsInMonthView: Boolean,\n\n    events: [ Array, Function ],\n    eventColor: [ String, Function ],\n\n    emitImmediately: Boolean,\n\n    options: [ Array, Function ],\n\n    navigationMinYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    navigationMaxYearMonth: {\n      type: String,\n      validator: yearMonthValidator\n    },\n\n    noUnset: Boolean,\n\n    firstDayOfWeek: [ String, Number ],\n    todayBtn: Boolean,\n    minimal: Boolean,\n    defaultView: {\n      type: String,\n      default: 'Calendar',\n      validator: viewIsValid\n    }\n  },\n\n  emits: [\n    ...useDatetimeEmits,\n    'rangeStart', 'rangeEnd', 'navigation'\n  ],\n\n  setup (props, { slots, emit }) {\n    const { proxy } = getCurrentInstance()\n    const { $q } = proxy\n\n    const isDark = useDark(props, $q)\n    const { getCache } = useCache()\n    const { tabindex, headerClass, getLocale, getCurrentDate } = useDatetime(props, $q)\n\n    let lastEmitValue\n\n    const formAttrs = useFormAttrs(props)\n    const injectFormInput = useFormInject(formAttrs)\n\n    const blurTargetRef = ref(null)\n    const innerMask = ref(getMask())\n    const innerLocale = ref(getLocale())\n\n    const mask = computed(() => getMask())\n    const locale = computed(() => getLocale())\n\n    const today = computed(() => getCurrentDate())\n\n    // model of current calendar view:\n    const viewModel = ref(getViewModel(innerMask.value, innerLocale.value))\n\n    const view = ref(props.defaultView)\n\n    const direction = $q.lang.rtl === true ? 'right' : 'left'\n    const monthDirection = ref(direction.value)\n    const yearDirection = ref(direction.value)\n\n    const year = viewModel.value.year\n    const startYear = ref(year - (year % yearsInterval) - (year < 0 ? yearsInterval : 0))\n    const editRange = ref(null)\n\n    const classes = computed(() => {\n      const type = props.landscape === true ? 'landscape' : 'portrait'\n      return `q-date q-date--${ type } q-date--${ type }-${ props.minimal === true ? 'minimal' : 'standard' }`\n        + (isDark.value === true ? ' q-date--dark q-dark' : '')\n        + (props.bordered === true ? ' q-date--bordered' : '')\n        + (props.square === true ? ' q-date--square no-border-radius' : '')\n        + (props.flat === true ? ' q-date--flat no-shadow' : '')\n        + (props.disable === true ? ' disabled' : (props.readonly === true ? ' q-date--readonly' : ''))\n    })\n\n    const computedColor = computed(() => {\n      return props.color || 'primary'\n    })\n\n    const computedTextColor = computed(() => {\n      return props.textColor || 'white'\n    })\n\n    const isImmediate = computed(() =>\n      props.emitImmediately === true\n      && props.multiple !== true\n      && props.range !== true\n    )\n\n    const normalizedModel = computed(() => (\n      Array.isArray(props.modelValue) === true\n        ? props.modelValue\n        : (props.modelValue !== null && props.modelValue !== void 0 ? [ props.modelValue ] : [])\n    ))\n\n    const daysModel = computed(() =>\n      normalizedModel.value\n        .filter(date => typeof date === 'string')\n        .map(date => decodeString(date, innerMask.value, innerLocale.value))\n        .filter(date =>\n          date.dateHash !== null\n          && date.day !== null\n          && date.month !== null\n          && date.year !== null\n        )\n    )\n\n    const rangeModel = computed(() => {\n      const fn = date => decodeString(date, innerMask.value, innerLocale.value)\n      return normalizedModel.value\n        .filter(date => isObject(date) === true && date.from !== void 0 && date.to !== void 0)\n        .map(range => ({ from: fn(range.from), to: fn(range.to) }))\n        .filter(range => range.from.dateHash !== null && range.to.dateHash !== null && range.from.dateHash < range.to.dateHash)\n    })\n\n    const getNativeDateFn = computed(() => (\n      props.calendar !== 'persian'\n        ? model => new Date(model.year, model.month - 1, model.day)\n        : model => {\n          const gDate = toGregorian(model.year, model.month, model.day)\n          return new Date(gDate.gy, gDate.gm - 1, gDate.gd)\n        }\n    ))\n\n    const encodeObjectFn = computed(() => (\n      props.calendar === 'persian'\n        ? getDayHash\n        : (date, mask, locale) => formatDate(\n            new Date(\n              date.year,\n              date.month - 1,\n              date.day,\n              date.hour,\n              date.minute,\n              date.second,\n              date.millisecond\n            ),\n            mask === void 0 ? innerMask.value : mask,\n            locale === void 0 ? innerLocale.value : locale,\n            date.year,\n            date.timezoneOffset\n          )\n    ))\n\n    const daysInModel = computed(() =>\n      daysModel.value.length + rangeModel.value.reduce(\n        (acc, range) => acc + 1 + getDateDiff(\n          getNativeDateFn.value(range.to),\n          getNativeDateFn.value(range.from)\n        ),\n        0\n      )\n    )\n\n    const headerTitle = computed(() => {\n      if (props.title !== void 0 && props.title !== null && props.title.length !== 0) {\n        return props.title\n      }\n\n      if (editRange.value !== null) {\n        const model = editRange.value.init\n        const date = getNativeDateFn.value(model)\n\n        return innerLocale.value.daysShort[ date.getDay() ] + ', '\n          + innerLocale.value.monthsShort[ model.month - 1 ] + ' '\n          + model.day + lineStr + '?'\n      }\n\n      if (daysInModel.value === 0) {\n        return lineStr\n      }\n\n      if (daysInModel.value > 1) {\n        return `${ daysInModel.value } ${ innerLocale.value.pluralDay }`\n      }\n\n      const model = daysModel.value[ 0 ]\n      const date = getNativeDateFn.value(model)\n\n      if (isNaN(date.valueOf()) === true) {\n        return lineStr\n      }\n\n      if (innerLocale.value.headerTitle !== void 0) {\n        return innerLocale.value.headerTitle(date, model)\n      }\n\n      return innerLocale.value.daysShort[ date.getDay() ] + ', '\n        + innerLocale.value.monthsShort[ model.month - 1 ] + ' '\n        + model.day\n    })\n\n    const minSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.from))\n        .sort((a, b) => a.year - b.year || a.month - b.month)\n\n      return model[ 0 ]\n    })\n\n    const maxSelectedModel = computed(() => {\n      const model = daysModel.value.concat(rangeModel.value.map(range => range.to))\n        .sort((a, b) => b.year - a.year || b.month - a.month)\n\n      return model[ 0 ]\n    })\n\n    const headerSubtitle = computed(() => {\n      if (props.subtitle !== void 0 && props.subtitle !== null && props.subtitle.length !== 0) {\n        return props.subtitle\n      }\n\n      if (daysInModel.value === 0) {\n        return lineStr\n      }\n\n      if (daysInModel.value > 1) {\n        const from = minSelectedModel.value\n        const to = maxSelectedModel.value\n        const month = innerLocale.value.monthsShort\n\n        return month[ from.month - 1 ] + (\n          from.year !== to.year\n            ? ' ' + from.year + lineStr + month[ to.month - 1 ] + ' '\n            : (\n                from.month !== to.month\n                  ? lineStr + month[ to.month - 1 ]\n                  : ''\n              )\n        ) + ' ' + to.year\n      }\n\n      return daysModel.value[ 0 ].year\n    })\n\n    const dateArrow = computed(() => {\n      const val = [ $q.iconSet.datetime.arrowLeft, $q.iconSet.datetime.arrowRight ]\n      return $q.lang.rtl === true ? val.reverse() : val\n    })\n\n    const computedFirstDayOfWeek = computed(() => (\n      props.firstDayOfWeek !== void 0\n        ? Number(props.firstDayOfWeek)\n        : innerLocale.value.firstDayOfWeek\n    ))\n\n    const daysOfWeek = computed(() => {\n      const\n        days = innerLocale.value.daysShort,\n        first = computedFirstDayOfWeek.value\n\n      return first > 0\n        ? days.slice(first, 7).concat(days.slice(0, first))\n        : days\n    })\n\n    const daysInMonth = computed(() => {\n      const date = viewModel.value\n      return props.calendar !== 'persian'\n        ? (new Date(date.year, date.month, 0)).getDate()\n        : jalaaliMonthLength(date.year, date.month)\n    })\n\n    const evtColor = computed(() => (\n      typeof props.eventColor === 'function'\n        ? props.eventColor\n        : () => props.eventColor\n    ))\n\n    const minNav = computed(() => {\n      if (props.navigationMinYearMonth === void 0) {\n        return null\n      }\n\n      const data = props.navigationMinYearMonth.split('/')\n      return { year: parseInt(data[ 0 ], 10), month: parseInt(data[ 1 ], 10) }\n    })\n\n    const maxNav = computed(() => {\n      if (props.navigationMaxYearMonth === void 0) {\n        return null\n      }\n\n      const data = props.navigationMaxYearMonth.split('/')\n      return { year: parseInt(data[ 0 ], 10), month: parseInt(data[ 1 ], 10) }\n    })\n\n    const navBoundaries = computed(() => {\n      const data = {\n        month: { prev: true, next: true },\n        year: { prev: true, next: true }\n      }\n\n      if (minNav.value !== null && minNav.value.year >= viewModel.value.year) {\n        data.year.prev = false\n        if (minNav.value.year === viewModel.value.year && minNav.value.month >= viewModel.value.month) {\n          data.month.prev = false\n        }\n      }\n\n      if (maxNav.value !== null && maxNav.value.year <= viewModel.value.year) {\n        data.year.next = false\n        if (maxNav.value.year === viewModel.value.year && maxNav.value.month <= viewModel.value.month) {\n          data.month.next = false\n        }\n      }\n\n      return data\n    })\n\n    const daysMap = computed(() => {\n      const map = {}\n\n      daysModel.value.forEach(entry => {\n        const hash = getMonthHash(entry)\n\n        if (map[ hash ] === void 0) {\n          map[ hash ] = []\n        }\n\n        map[ hash ].push(entry.day)\n      })\n\n      return map\n    })\n\n    const rangeMap = computed(() => {\n      const map = {}\n\n      rangeModel.value.forEach(entry => {\n        const hashFrom = getMonthHash(entry.from)\n        const hashTo = getMonthHash(entry.to)\n\n        if (map[ hashFrom ] === void 0) {\n          map[ hashFrom ] = []\n        }\n\n        map[ hashFrom ].push({\n          from: entry.from.day,\n          to: hashFrom === hashTo ? entry.to.day : void 0,\n          range: entry\n        })\n\n        if (hashFrom < hashTo) {\n          let hash\n          const { year, month } = entry.from\n          const cur = month < 12\n            ? { year, month: month + 1 }\n            : { year: year + 1, month: 1 }\n\n          while ((hash = getMonthHash(cur)) <= hashTo) {\n            if (map[ hash ] === void 0) {\n              map[ hash ] = []\n            }\n\n            map[ hash ].push({\n              from: void 0,\n              to: hash === hashTo ? entry.to.day : void 0,\n              range: entry\n            })\n\n            cur.month++\n            if (cur.month > 12) {\n              cur.year++\n              cur.month = 1\n            }\n          }\n        }\n      })\n\n      return map\n    })\n\n    const rangeView = computed(() => {\n      if (editRange.value === null) {\n        return\n      }\n\n      const { init, initHash, final, finalHash } = editRange.value\n\n      const [ from, to ] = initHash <= finalHash\n        ? [ init, final ]\n        : [ final, init ]\n\n      const fromHash = getMonthHash(from)\n      const toHash = getMonthHash(to)\n\n      if (fromHash !== viewMonthHash.value && toHash !== viewMonthHash.value) {\n        return\n      }\n\n      const view = {}\n\n      if (fromHash === viewMonthHash.value) {\n        view.from = from.day\n        view.includeFrom = true\n      }\n      else {\n        view.from = 1\n      }\n\n      if (toHash === viewMonthHash.value) {\n        view.to = to.day\n        view.includeTo = true\n      }\n      else {\n        view.to = daysInMonth.value\n      }\n\n      return view\n    })\n\n    const viewMonthHash = computed(() => getMonthHash(viewModel.value))\n\n    const selectionDaysMap = computed(() => {\n      const map = {}\n\n      if (props.options === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[ i ] = true\n        }\n\n        return map\n      }\n\n      const fn = typeof props.options === 'function'\n        ? props.options\n        : date => props.options.includes(date)\n\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const dayHash = viewMonthHash.value + '/' + pad(i)\n        map[ i ] = fn(dayHash)\n      }\n\n      return map\n    })\n\n    const eventDaysMap = computed(() => {\n      const map = {}\n\n      if (props.events === void 0) {\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          map[ i ] = false\n        }\n      }\n      else {\n        const fn = typeof props.events === 'function'\n          ? props.events\n          : date => props.events.includes(date)\n\n        for (let i = 1; i <= daysInMonth.value; i++) {\n          const dayHash = viewMonthHash.value + '/' + pad(i)\n          map[ i ] = fn(dayHash) === true && evtColor.value(dayHash)\n        }\n      }\n\n      return map\n    })\n\n    const viewDays = computed(() => {\n      let date, endDay\n      const { year, month } = viewModel.value\n\n      if (props.calendar !== 'persian') {\n        date = new Date(year, month - 1, 1)\n        endDay = (new Date(year, month - 1, 0)).getDate()\n      }\n      else {\n        const gDate = toGregorian(year, month, 1)\n        date = new Date(gDate.gy, gDate.gm - 1, gDate.gd)\n        let prevJM = month - 1\n        let prevJY = year\n        if (prevJM === 0) {\n          prevJM = 12\n          prevJY--\n        }\n        endDay = jalaaliMonthLength(prevJY, prevJM)\n      }\n\n      return {\n        days: date.getDay() - computedFirstDayOfWeek.value - 1,\n        endDay\n      }\n    })\n\n    const days = computed(() => {\n      const res = []\n      const { days, endDay } = viewDays.value\n\n      const len = days < 0 ? days + 7 : days\n      if (len < 6) {\n        for (let i = endDay - len; i <= endDay; i++) {\n          res.push({ i, fill: true })\n        }\n      }\n\n      const index = res.length\n\n      for (let i = 1; i <= daysInMonth.value; i++) {\n        const day = { i, event: eventDaysMap.value[ i ], classes: [] }\n\n        if (selectionDaysMap.value[ i ] === true) {\n          day.in = true\n          day.flat = true\n        }\n\n        res.push(day)\n      }\n\n      // if current view has days in model\n      if (daysMap.value[ viewMonthHash.value ] !== void 0) {\n        daysMap.value[ viewMonthHash.value ].forEach(day => {\n          const i = index + day - 1\n          Object.assign(res[ i ], {\n            selected: true,\n            unelevated: true,\n            flat: false,\n            color: computedColor.value,\n            textColor: computedTextColor.value\n          })\n        })\n      }\n\n      // if current view has ranges in model\n      if (rangeMap.value[ viewMonthHash.value ] !== void 0) {\n        rangeMap.value[ viewMonthHash.value ].forEach(entry => {\n          if (entry.from !== void 0) {\n            const from = index + entry.from - 1\n            const to = index + (entry.to || daysInMonth.value) - 1\n\n            for (let day = from; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n\n            Object.assign(res[ from ], {\n              rangeFrom: true,\n              flat: false\n            })\n\n            entry.to !== void 0 && Object.assign(res[ to ], {\n              rangeTo: true,\n              flat: false\n            })\n          }\n          else if (entry.to !== void 0) {\n            const to = index + entry.to - 1\n\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n\n            Object.assign(res[ to ], {\n              flat: false,\n              rangeTo: true\n            })\n          }\n          else {\n            const to = index + daysInMonth.value - 1\n            for (let day = index; day <= to; day++) {\n              Object.assign(res[ day ], {\n                range: entry.range,\n                unelevated: true,\n                color: computedColor.value,\n                textColor: computedTextColor.value\n              })\n            }\n          }\n        })\n      }\n\n      if (rangeView.value !== void 0) {\n        const from = index + rangeView.value.from - 1\n        const to = index + rangeView.value.to - 1\n\n        for (let day = from; day <= to; day++) {\n          res[ day ].color = computedColor.value\n          res[ day ].editRange = true\n        }\n\n        if (rangeView.value.includeFrom === true) {\n          res[ from ].editRangeFrom = true\n        }\n        if (rangeView.value.includeTo === true) {\n          res[ to ].editRangeTo = true\n        }\n      }\n\n      if (viewModel.value.year === today.value.year && viewModel.value.month === today.value.month) {\n        res[ index + today.value.day - 1 ].today = true\n      }\n\n      const left = res.length % 7\n      if (left > 0) {\n        const afterDays = 7 - left\n        for (let i = 1; i <= afterDays; i++) {\n          res.push({ i, fill: true })\n        }\n      }\n\n      res.forEach(day => {\n        let cls = 'q-date__calendar-item '\n\n        if (day.fill === true) {\n          cls += 'q-date__calendar-item--fill'\n        }\n        else {\n          cls += `q-date__calendar-item--${ day.in === true ? 'in' : 'out' }`\n\n          if (day.range !== void 0) {\n            cls += ` q-date__range${ day.rangeTo === true ? '-to' : (day.rangeFrom === true ? '-from' : '') }`\n          }\n\n          if (day.editRange === true) {\n            cls += ` q-date__edit-range${ day.editRangeFrom === true ? '-from' : '' }${ day.editRangeTo === true ? '-to' : '' }`\n          }\n\n          if (day.range !== void 0 || day.editRange === true) {\n            cls += ` text-${ day.color }`\n          }\n        }\n\n        day.classes = cls\n      })\n\n      return res\n    })\n\n    const attributes = computed(() => (\n      props.disable === true\n        ? { 'aria-disabled': 'true' }\n        : (props.readonly === true ? { 'aria-readonly': 'true' } : {})\n    ))\n\n    watch(() => props.modelValue, v => {\n      if (lastEmitValue === v) {\n        lastEmitValue = 0\n      }\n      else {\n        const model = getViewModel(innerMask.value, innerLocale.value)\n        updateViewModel(model.year, model.month, model)\n      }\n    })\n\n    watch(view, () => {\n      if (blurTargetRef.value !== null && proxy.$el.contains(document.activeElement) === true) {\n        blurTargetRef.value.focus()\n      }\n    })\n\n    watch(() => viewModel.value.year + '|' + viewModel.value.month, () => {\n      emit('navigation', { year: viewModel.value.year, month: viewModel.value.month })\n    })\n\n    watch(mask, val => {\n      updateValue(val, innerLocale.value, 'mask')\n      innerMask.value = val\n    })\n\n    watch(locale, val => {\n      updateValue(innerMask.value, val, 'locale')\n      innerLocale.value = val\n    })\n\n    function setToday () {\n      const date = today.value\n      const month = daysMap.value[ getMonthHash(date) ]\n\n      if (month === void 0 || month.includes(date.day) === false) {\n        addToModel(date)\n      }\n\n      setCalendarTo(date.year, date.month)\n    }\n\n    function setView (viewMode) {\n      if (viewIsValid(viewMode) === true) {\n        view.value = viewMode\n      }\n    }\n\n    function offsetCalendar (type, descending) {\n      if ([ 'month', 'year' ].includes(type)) {\n        const fn = type === 'month' ? goToMonth : goToYear\n        fn(descending === true ? -1 : 1)\n      }\n    }\n\n    function setCalendarTo (year, month) {\n      view.value = 'Calendar'\n      updateViewModel(year, month)\n    }\n\n    function setEditingRange (from, to) {\n      if (props.range === false || !from) {\n        editRange.value = null\n        return\n      }\n\n      const init = Object.assign({ ...viewModel.value }, from)\n      const final = to !== void 0\n        ? Object.assign({ ...viewModel.value }, to)\n        : init\n\n      editRange.value = {\n        init,\n        initHash: getDayHash(init),\n        final,\n        finalHash: getDayHash(final)\n      }\n\n      setCalendarTo(init.year, init.month)\n    }\n\n    function getMask () {\n      return props.calendar === 'persian' ? 'YYYY/MM/DD' : props.mask\n    }\n\n    function decodeString (date, mask, locale) {\n      return __splitDate(\n        date,\n        mask,\n        locale,\n        props.calendar,\n        {\n          hour: 0,\n          minute: 0,\n          second: 0,\n          millisecond: 0\n        }\n      )\n    }\n\n    function getViewModel (mask, locale) {\n      const model = Array.isArray(props.modelValue) === true\n        ? props.modelValue\n        : (props.modelValue ? [ props.modelValue ] : [])\n\n      if (model.length === 0) {\n        return getDefaultViewModel()\n      }\n\n      const target = model[ model.length - 1 ]\n      const decoded = decodeString(\n        target.from !== void 0 ? target.from : target,\n        mask,\n        locale\n      )\n\n      return decoded.dateHash === null\n        ? getDefaultViewModel()\n        : decoded\n    }\n\n    function getDefaultViewModel () {\n      let year, month\n\n      if (props.defaultYearMonth !== void 0) {\n        const d = props.defaultYearMonth.split('/')\n        year = parseInt(d[ 0 ], 10)\n        month = parseInt(d[ 1 ], 10)\n      }\n      else {\n        // may come from data() where computed\n        // props are not yet available\n        const d = today.value !== void 0\n          ? today.value\n          : getCurrentDate()\n\n        year = d.year\n        month = d.month\n      }\n\n      return {\n        year,\n        month,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        dateHash: year + '/' + pad(month) + '/01'\n      }\n    }\n\n    function goToMonth (offset) {\n      let year = viewModel.value.year\n      let month = Number(viewModel.value.month) + offset\n\n      if (month === 13) {\n        month = 1\n        year++\n      }\n      else if (month === 0) {\n        month = 12\n        year--\n      }\n\n      updateViewModel(year, month)\n      isImmediate.value === true && emitImmediately('month')\n    }\n\n    function goToYear (offset) {\n      const year = Number(viewModel.value.year) + offset\n      updateViewModel(year, viewModel.value.month)\n      isImmediate.value === true && emitImmediately('year')\n    }\n\n    function setYear (year) {\n      updateViewModel(year, viewModel.value.month)\n      view.value = props.defaultView === 'Years' ? 'Months' : 'Calendar'\n      isImmediate.value === true && emitImmediately('year')\n    }\n\n    function setMonth (month) {\n      updateViewModel(viewModel.value.year, month)\n      view.value = 'Calendar'\n      isImmediate.value === true && emitImmediately('month')\n    }\n\n    function toggleDate (date, monthHash) {\n      const month = daysMap.value[ monthHash ]\n      const fn = month !== void 0 && month.includes(date.day) === true\n        ? removeFromModel\n        : addToModel\n\n      fn(date)\n    }\n\n    function getShortDate (date) {\n      return { year: date.year, month: date.month, day: date.day }\n    }\n\n    function updateViewModel (year, month, time) {\n      if (minNav.value !== null && year <= minNav.value.year) {\n        year = minNav.value.year\n        if (month < minNav.value.month) {\n          month = minNav.value.month\n        }\n      }\n\n      if (maxNav.value !== null && year >= maxNav.value.year) {\n        year = maxNav.value.year\n        if (month > maxNav.value.month) {\n          month = maxNav.value.month\n        }\n      }\n\n      if (time !== void 0) {\n        const { hour, minute, second, millisecond, timezoneOffset, timeHash } = time\n        Object.assign(viewModel.value, { hour, minute, second, millisecond, timezoneOffset, timeHash })\n      }\n\n      const newHash = year + '/' + pad(month) + '/01'\n\n      if (newHash !== viewModel.value.dateHash) {\n        monthDirection.value = (viewModel.value.dateHash < newHash) === ($q.lang.rtl !== true) ? 'left' : 'right'\n        if (year !== viewModel.value.year) {\n          yearDirection.value = monthDirection.value\n        }\n\n        nextTick(() => {\n          startYear.value = year - year % yearsInterval - (year < 0 ? yearsInterval : 0)\n          Object.assign(viewModel.value, {\n            year,\n            month,\n            day: 1,\n            dateHash: newHash\n          })\n        })\n      }\n    }\n\n    function emitValue (val, action, date) {\n      const value = val !== null && val.length === 1 && props.multiple === false\n        ? val[ 0 ]\n        : val\n\n      lastEmitValue = value\n\n      const { reason, details } = getEmitParams(action, date)\n      emit('update:modelValue', value, reason, details)\n    }\n\n    function emitImmediately (reason) {\n      const date = daysModel.value[ 0 ] !== void 0 && daysModel.value[ 0 ].dateHash !== null\n        ? { ...daysModel.value[ 0 ] }\n        : { ...viewModel.value } // inherit day, hours, minutes, milliseconds...\n\n      // nextTick required because of animation delay in viewModel\n      nextTick(() => {\n        date.year = viewModel.value.year\n        date.month = viewModel.value.month\n\n        const maxDay = props.calendar !== 'persian'\n          ? (new Date(date.year, date.month, 0)).getDate()\n          : jalaaliMonthLength(date.year, date.month)\n\n        date.day = Math.min(Math.max(1, date.day), maxDay)\n\n        const value = encodeEntry(date)\n        lastEmitValue = value\n\n        const { details } = getEmitParams('', date)\n        emit('update:modelValue', value, reason, details)\n      })\n    }\n\n    function getEmitParams (action, date) {\n      return date.from !== void 0\n        ? {\n            reason: `${ action }-range`,\n            details: {\n              ...getShortDate(date.target),\n              from: getShortDate(date.from),\n              to: getShortDate(date.to)\n            }\n          }\n        : {\n            reason: `${ action }-day`,\n            details: getShortDate(date)\n          }\n    }\n\n    function encodeEntry (date, mask, locale) {\n      return date.from !== void 0\n        ? { from: encodeObjectFn.value(date.from, mask, locale), to: encodeObjectFn.value(date.to, mask, locale) }\n        : encodeObjectFn.value(date, mask, locale)\n    }\n\n    function addToModel (date) {\n      let value\n\n      if (props.multiple === true) {\n        if (date.from !== void 0) {\n          // we also need to filter out intersections\n\n          const fromHash = getDayHash(date.from)\n          const toHash = getDayHash(date.to)\n\n          const days = daysModel.value\n            .filter(day => day.dateHash < fromHash || day.dateHash > toHash)\n\n          const ranges = rangeModel.value\n            .filter(({ from, to }) => to.dateHash < fromHash || from.dateHash > toHash)\n\n          value = days.concat(ranges).concat(date).map(entry => encodeEntry(entry))\n        }\n        else {\n          const model = normalizedModel.value.slice()\n          model.push(encodeEntry(date))\n          value = model\n        }\n      }\n      else {\n        value = encodeEntry(date)\n      }\n\n      emitValue(value, 'add', date)\n    }\n\n    function removeFromModel (date) {\n      if (props.noUnset === true) {\n        return\n      }\n\n      let model = null\n\n      if (props.multiple === true && Array.isArray(props.modelValue) === true) {\n        const val = encodeEntry(date)\n\n        if (date.from !== void 0) {\n          model = props.modelValue.filter(\n            date => (\n              date.from !== void 0\n                ? (date.from !== val.from && date.to !== val.to)\n                : true\n            )\n          )\n        }\n        else {\n          model = props.modelValue.filter(date => date !== val)\n        }\n\n        if (model.length === 0) {\n          model = null\n        }\n      }\n\n      emitValue(model, 'remove', date)\n    }\n\n    function updateValue (mask, locale, reason) {\n      const model = daysModel.value\n        .concat(rangeModel.value)\n        .map(entry => encodeEntry(entry, mask, locale))\n        .filter(entry => {\n          return entry.from !== void 0\n            ? entry.from.dateHash !== null && entry.to.dateHash !== null\n            : entry.dateHash !== null\n        })\n\n      emit('update:modelValue', (props.multiple === true ? model : model[ 0 ]) || null, reason)\n    }\n\n    function getHeader () {\n      if (props.minimal === true) { return }\n\n      return h('div', {\n        class: 'q-date__header ' + headerClass.value\n      }, [\n        h('div', {\n          class: 'relative-position'\n        }, [\n          h(Transition, {\n            name: 'q-transition--fade'\n          }, () => h('div', {\n            key: 'h-yr-' + headerSubtitle.value,\n            class: 'q-date__header-subtitle q-date__header-link '\n              + (view.value === 'Years' ? 'q-date__header-link--active' : 'cursor-pointer'),\n            tabindex: tabindex.value,\n            ...getCache('vY', {\n              onClick () { view.value = 'Years' },\n              onKeyup (e) { e.keyCode === 13 && (view.value = 'Years') }\n            })\n          }, [ headerSubtitle.value ]))\n        ]),\n\n        h('div', {\n          class: 'q-date__header-title relative-position flex no-wrap'\n        }, [\n          h('div', {\n            class: 'relative-position col'\n          }, [\n            h(Transition, {\n              name: 'q-transition--fade'\n            }, () => h('div', {\n              key: 'h-sub' + headerTitle.value,\n              class: 'q-date__header-title-label q-date__header-link '\n                + (view.value === 'Calendar' ? 'q-date__header-link--active' : 'cursor-pointer'),\n              tabindex: tabindex.value,\n              ...getCache('vC', {\n                onClick () { view.value = 'Calendar' },\n                onKeyup (e) { e.keyCode === 13 && (view.value = 'Calendar') }\n              })\n            }, [ headerTitle.value ]))\n          ]),\n\n          props.todayBtn === true ? h(QBtn, {\n            class: 'q-date__header-today self-start',\n            icon: $q.iconSet.datetime.today,\n            flat: true,\n            size: 'sm',\n            round: true,\n            tabindex: tabindex.value,\n            onClick: setToday\n          }) : null\n        ])\n      ])\n    }\n\n    function getNavigation ({ label, type, key, dir, goTo, boundaries, cls }) {\n      return [\n        h('div', {\n          class: 'row items-center q-date__arrow'\n        }, [\n          h(QBtn, {\n            round: true,\n            dense: true,\n            size: 'sm',\n            flat: true,\n            icon: dateArrow.value[ 0 ],\n            tabindex: tabindex.value,\n            disable: boundaries.prev === false,\n            ...getCache('go-#' + type, { onClick () { goTo(-1) } })\n          })\n        ]),\n\n        h('div', {\n          class: 'relative-position overflow-hidden flex flex-center' + cls\n        }, [\n          h(Transition, {\n            name: 'q-transition--jump-' + dir\n          }, () => h('div', { key }, [\n            h(QBtn, {\n              flat: true,\n              dense: true,\n              noCaps: true,\n              label,\n              tabindex: tabindex.value,\n              ...getCache('view#' + type, { onClick: () => { view.value = type } })\n            })\n          ]))\n        ]),\n\n        h('div', {\n          class: 'row items-center q-date__arrow'\n        }, [\n          h(QBtn, {\n            round: true,\n            dense: true,\n            size: 'sm',\n            flat: true,\n            icon: dateArrow.value[ 1 ],\n            tabindex: tabindex.value,\n            disable: boundaries.next === false,\n            ...getCache('go+#' + type, { onClick () { goTo(1) } })\n          })\n        ])\n      ]\n    }\n\n    const renderViews = {\n      Calendar: () => ([\n        h('div', {\n          key: 'calendar-view',\n          class: 'q-date__view q-date__calendar'\n        }, [\n          h('div', {\n            class: 'q-date__navigation row items-center no-wrap'\n          }, getNavigation({\n            label: innerLocale.value.months[ viewModel.value.month - 1 ],\n            type: 'Months',\n            key: viewModel.value.month,\n            dir: monthDirection.value,\n            goTo: goToMonth,\n            boundaries: navBoundaries.value.month,\n            cls: ' col'\n          }).concat(getNavigation({\n            label: viewModel.value.year,\n            type: 'Years',\n            key: viewModel.value.year,\n            dir: yearDirection.value,\n            goTo: goToYear,\n            boundaries: navBoundaries.value.year,\n            cls: ''\n          }))),\n\n          h('div', {\n            class: 'q-date__calendar-weekdays row items-center no-wrap'\n          }, daysOfWeek.value.map(day => h('div', { class: 'q-date__calendar-item' }, [ h('div', day) ]))),\n\n          h('div', {\n            class: 'q-date__calendar-days-container relative-position overflow-hidden'\n          }, [\n            h(Transition, {\n              name: 'q-transition--slide-' + monthDirection.value\n            }, () => h('div', {\n              key: viewMonthHash.value,\n              class: 'q-date__calendar-days fit'\n            }, days.value.map(day => h('div', { class: day.classes }, [\n              day.in === true\n                ? h(\n                  QBtn, {\n                    class: day.today === true ? 'q-date__today' : '',\n                    dense: true,\n                    flat: day.flat,\n                    unelevated: day.unelevated,\n                    color: day.color,\n                    textColor: day.textColor,\n                    label: day.i,\n                    tabindex: tabindex.value,\n                    ...getCache('day#' + day.i, {\n                      onClick: () => { onDayClick(day.i) },\n                      onMouseover: () => { onDayMouseover(day.i) }\n                    })\n                  },\n                  day.event !== false\n                    ? () => h('div', { class: 'q-date__event bg-' + day.event })\n                    : null\n                )\n                : h('div', '' + day.i)\n            ]))))\n          ])\n        ])\n      ]),\n\n      Months () {\n        const currentYear = viewModel.value.year === today.value.year\n        const isDisabled = month => {\n          return (\n            (minNav.value !== null && viewModel.value.year === minNav.value.year && minNav.value.month > month)\n            || (maxNav.value !== null && viewModel.value.year === maxNav.value.year && maxNav.value.month < month)\n          )\n        }\n\n        const content = innerLocale.value.monthsShort.map((month, i) => {\n          const active = viewModel.value.month === i + 1\n\n          return h('div', {\n            class: 'q-date__months-item flex flex-center'\n          }, [\n            h(QBtn, {\n              class: currentYear === true && today.value.month === i + 1 ? 'q-date__today' : null,\n              flat: active !== true,\n              label: month,\n              unelevated: active,\n              color: active === true ? computedColor.value : null,\n              textColor: active === true ? computedTextColor.value : null,\n              tabindex: tabindex.value,\n              disable: isDisabled(i + 1),\n              ...getCache('month#' + i, { onClick: () => { setMonth(i + 1) } })\n            })\n          ])\n        })\n\n        props.yearsInMonthView === true && content.unshift(\n          h('div', { class: 'row no-wrap full-width' }, [\n            getNavigation({\n              label: viewModel.value.year,\n              type: 'Years',\n              key: viewModel.value.year,\n              dir: yearDirection.value,\n              goTo: goToYear,\n              boundaries: navBoundaries.value.year,\n              cls: ' col'\n            })\n          ])\n        )\n\n        return h('div', {\n          key: 'months-view',\n          class: 'q-date__view q-date__months flex flex-center'\n        }, content)\n      },\n\n      Years () {\n        const\n          start = startYear.value,\n          stop = start + yearsInterval,\n          years = []\n\n        const isDisabled = year => {\n          return (\n            (minNav.value !== null && minNav.value.year > year)\n            || (maxNav.value !== null && maxNav.value.year < year)\n          )\n        }\n\n        for (let i = start; i <= stop; i++) {\n          const active = viewModel.value.year === i\n\n          years.push(\n            h('div', {\n              class: 'q-date__years-item flex flex-center'\n            }, [\n              h(QBtn, {\n                key: 'yr' + i,\n                class: today.value.year === i ? 'q-date__today' : null,\n                flat: !active,\n                label: i,\n                dense: true,\n                unelevated: active,\n                color: active === true ? computedColor.value : null,\n                textColor: active === true ? computedTextColor.value : null,\n                tabindex: tabindex.value,\n                disable: isDisabled(i),\n                ...getCache('yr#' + i, { onClick: () => { setYear(i) } })\n              })\n            ])\n          )\n        }\n\n        return h('div', {\n          class: 'q-date__view q-date__years flex flex-center'\n        }, [\n          h('div', {\n            class: 'col-auto'\n          }, [\n            h(QBtn, {\n              round: true,\n              dense: true,\n              flat: true,\n              icon: dateArrow.value[ 0 ],\n              tabindex: tabindex.value,\n              disable: isDisabled(start),\n              ...getCache('y-', { onClick: () => { startYear.value -= yearsInterval } })\n            })\n          ]),\n\n          h('div', {\n            class: 'q-date__years-content col self-stretch row items-center'\n          }, years),\n\n          h('div', {\n            class: 'col-auto'\n          }, [\n            h(QBtn, {\n              round: true,\n              dense: true,\n              flat: true,\n              icon: dateArrow.value[ 1 ],\n              tabindex: tabindex.value,\n              disable: isDisabled(stop),\n              ...getCache('y+', { onClick: () => { startYear.value += yearsInterval } })\n            })\n          ])\n        ])\n      }\n    }\n\n    function onDayClick (dayIndex) {\n      const day = { ...viewModel.value, day: dayIndex }\n\n      if (props.range === false) {\n        toggleDate(day, viewMonthHash.value)\n        return\n      }\n\n      if (editRange.value === null) {\n        const dayProps = days.value.find(day => day.fill !== true && day.i === dayIndex)\n\n        if (props.noUnset !== true && dayProps.range !== void 0) {\n          removeFromModel({ target: day, from: dayProps.range.from, to: dayProps.range.to })\n          return\n        }\n\n        if (dayProps.selected === true) {\n          removeFromModel(day)\n          return\n        }\n\n        const initHash = getDayHash(day)\n\n        editRange.value = {\n          init: day,\n          initHash,\n          final: day,\n          finalHash: initHash\n        }\n\n        emit('rangeStart', getShortDate(day))\n      }\n      else {\n        const\n          initHash = editRange.value.initHash,\n          finalHash = getDayHash(day),\n          payload = initHash <= finalHash\n            ? { from: editRange.value.init, to: day }\n            : { from: day, to: editRange.value.init }\n\n        editRange.value = null\n        addToModel(initHash === finalHash ? day : { target: day, ...payload })\n\n        emit('rangeEnd', {\n          from: getShortDate(payload.from),\n          to: getShortDate(payload.to)\n        })\n      }\n    }\n\n    function onDayMouseover (dayIndex) {\n      if (editRange.value !== null) {\n        const final = { ...viewModel.value, day: dayIndex }\n\n        Object.assign(editRange.value, {\n          final,\n          finalHash: getDayHash(final)\n        })\n      }\n    }\n\n    // expose public methods\n    Object.assign(proxy, {\n      setToday, setView, offsetCalendar, setCalendarTo, setEditingRange\n    })\n\n    return () => {\n      const content = [\n        h('div', {\n          class: 'q-date__content col relative-position'\n        }, [\n          h(Transition, {\n            name: 'q-transition--fade'\n          }, renderViews[ view.value ])\n        ])\n      ]\n\n      const def = hSlot(slots.default)\n      def !== void 0 && content.push(\n        h('div', { class: 'q-date__actions' }, def)\n      )\n\n      if (props.name !== void 0 && props.disable !== true) {\n        injectFormInput(content, 'push')\n      }\n\n      return h('div', {\n        class: classes.value,\n        ...attributes.value\n      }, [\n        getHeader(),\n\n        h('div', {\n          ref: blurTargetRef,\n          class: 'q-date__main col column',\n          tabindex: -1\n        }, content)\n      ])\n    }\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}