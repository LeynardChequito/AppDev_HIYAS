{"ast":null,"code":"import { ref, computed, onMounted, onBeforeUnmount } from 'vue';\nexport default {\n  setup() {\n    const cardVisible = ref(false);\n    const clicked = ref(false);\n    const accountClicked = () => {\n      cardVisible.value = !cardVisible.value;\n      clicked.value = !clicked.value;\n    };\n    const handleGlobalClick = event => {\n      const isOutsideButton = !event.target.closest('.q-btn');\n      const isOutsideNotificationCard = !event.target.closest('.notification-card');\n      if (cardVisible.value && isOutsideButton && isOutsideNotificationCard) {\n        cardVisible.value = false;\n        clicked.value = false;\n      }\n    };\n    const closeNotificationCard = () => {\n      cardVisible.value = false;\n      clicked.value = false;\n    };\n    const logout = () => {\n      // Clear the authentication token from localStorage\n      localStorage.removeItem('token');\n\n      // Emit a global event to notify other components about the logout\n      window.dispatchEvent(new Event('logout'));\n\n      // Close the notification card\n      closeNotificationCard();\n    };\n    onMounted(() => {\n      document.addEventListener('click', handleGlobalClick);\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('click', handleGlobalClick);\n    });\n    window.addEventListener('closeNotificationCard', closeNotificationCard);\n    const buttonColor = computed(() => {\n      return clicked.value ? 'grey' : '';\n    });\n    return {\n      cardVisible,\n      accountClicked,\n      buttonColor,\n      handleGlobalClick,\n      logout // Expose the logout method to the template\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onBeforeUnmount","setup","cardVisible","clicked","accountClicked","value","handleGlobalClick","event","isOutsideButton","target","closest","isOutsideNotificationCard","closeNotificationCard","logout","localStorage","removeItem","window","dispatchEvent","Event","document","addEventListener","removeEventListener","buttonColor"],"sources":["C:\\Users\\user\\OneDrive\\Desktop\\HiyasProject\\src\\components\\Account.vue"],"sourcesContent":["<template>\r\n    <q-btn dense round :color=\"buttonColor\" class=\"q-mr-md hays\" @click=\"accountClicked\">\r\n        <q-icon name=\"person\" style=\"color: black;\" />\r\n    </q-btn>\r\n\r\n    <div class=\"row one justify-center\">\r\n        <div class=\"account-card\" v-if=\"cardVisible\">\r\n            <q-card bordered class=\"my-card\" v-if=\"cardVisible\">\r\n                <div class=\"scrollable-list\">\r\n\r\n                    <q-list bordered class=\"rounded-borders\">\r\n\r\n                        <q-item clickable v-ripple>\r\n                            <q-item-section avatar>\r\n                                <q-avatar>\r\n                                    <img src=\"https://cdn.quasar.dev/img/avatar4.jpg\">\r\n                                </q-avatar>\r\n                            </q-item-section>\r\n\r\n                            <q-item-section>\r\n                                <q-item-label lines=\"1\">Jan Dyze Malaluan</q-item-label>\r\n                            </q-item-section>\r\n\r\n                        </q-item>\r\n\r\n                        <q-separator spaced />\r\n\r\n                        <q-item clickable v-ripple>\r\n                            <q-item-section avatar>\r\n                                <q-avatar color=\"grey\" text-color=\"white\" icon=\"settings\" />\r\n                            </q-item-section>\r\n\r\n                            <q-item-section>Settings</q-item-section>\r\n                            <q-item-section side>\r\n                                <q-icon name=\"chevron_right\" />\r\n                            </q-item-section>\r\n                        </q-item>\r\n\r\n                        <q-item clickable v-ripple>\r\n                            <q-item-section avatar>\r\n                                <q-avatar color=\"grey\" text-color=\"white\" icon=\"logout\" />\r\n                            </q-item-section>\r\n\r\n                            <q-item-section>Logout</q-item-section>\r\n                            <q-space />\r\n                            <q-item-section side>\r\n                                <q-icon name=\"chevron_right\" />\r\n                            </q-item-section>\r\n                        </q-item>\r\n\r\n\r\n                    </q-list>\r\n                </div>\r\n            </q-card>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\r\n\r\nexport default {\r\n    setup() {\r\n        const cardVisible = ref(false);\r\n        const clicked = ref(false);\r\n\r\n        const accountClicked = () => {\r\n            cardVisible.value = !cardVisible.value;\r\n            clicked.value = !clicked.value;\r\n        };\r\n\r\n        const handleGlobalClick = (event) => {\r\n            const isOutsideButton = !event.target.closest('.q-btn');\r\n            const isOutsideNotificationCard = !event.target.closest('.notification-card');\r\n\r\n            if (cardVisible.value && isOutsideButton && isOutsideNotificationCard) {\r\n                cardVisible.value = false;\r\n                clicked.value = false;\r\n            }\r\n        };\r\n\r\n        const closeNotificationCard = () => {\r\n            cardVisible.value = false;\r\n            clicked.value = false;\r\n        };\r\n\r\n        const logout = () => {\r\n            // Clear the authentication token from localStorage\r\n            localStorage.removeItem('token');\r\n\r\n            // Emit a global event to notify other components about the logout\r\n            window.dispatchEvent(new Event('logout'));\r\n\r\n            // Close the notification card\r\n            closeNotificationCard();\r\n        };\r\n\r\n\r\n        onMounted(() => {\r\n            document.addEventListener('click', handleGlobalClick);\r\n        });\r\n\r\n        onBeforeUnmount(() => {\r\n            document.removeEventListener('click', handleGlobalClick);\r\n        });\r\n\r\n        window.addEventListener('closeNotificationCard', closeNotificationCard);\r\n\r\n        const buttonColor = computed(() => {\r\n            return clicked.value ? 'grey' : '';\r\n        });\r\n\r\n        return {\r\n            cardVisible,\r\n            accountClicked,\r\n            buttonColor,\r\n            handleGlobalClick,\r\n            logout, // Expose the logout method to the template\r\n        };\r\n    },\r\n};\r\n</script>\r\n\r\n  \r\n<style lang=\"sass\" scoped>\r\n.my-card\r\n    width: 350px\r\n    max-width: 100%\r\n    color: black\r\n.scrollable-list\r\n    max-height: 450px \r\n    overflow-y: auto\r\n\r\n.one\r\n    background-color: black\r\n\r\n.account-card\r\n  position: absolute\r\n  z-index: 1\r\n  top: 0\r\n  right: 0\r\n  margin-top: 55px\r\n  margin-right: 10px\r\n.hays .icon\r\n    color: black\r\n</style>\r\n  \r\n\r\n\r\n  "],"mappings":"AA2DA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,eAAc,QAAS,KAAK;AAE/D,eAAe;EACXC,KAAKA,CAAA,EAAG;IACJ,MAAMC,WAAU,GAAIL,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMM,OAAM,GAAIN,GAAG,CAAC,KAAK,CAAC;IAE1B,MAAMO,cAAa,GAAIA,CAAA,KAAM;MACzBF,WAAW,CAACG,KAAI,GAAI,CAACH,WAAW,CAACG,KAAK;MACtCF,OAAO,CAACE,KAAI,GAAI,CAACF,OAAO,CAACE,KAAK;IAClC,CAAC;IAED,MAAMC,iBAAgB,GAAKC,KAAK,IAAK;MACjC,MAAMC,eAAc,GAAI,CAACD,KAAK,CAACE,MAAM,CAACC,OAAO,CAAC,QAAQ,CAAC;MACvD,MAAMC,yBAAwB,GAAI,CAACJ,KAAK,CAACE,MAAM,CAACC,OAAO,CAAC,oBAAoB,CAAC;MAE7E,IAAIR,WAAW,CAACG,KAAI,IAAKG,eAAc,IAAKG,yBAAyB,EAAE;QACnET,WAAW,CAACG,KAAI,GAAI,KAAK;QACzBF,OAAO,CAACE,KAAI,GAAI,KAAK;MACzB;IACJ,CAAC;IAED,MAAMO,qBAAoB,GAAIA,CAAA,KAAM;MAChCV,WAAW,CAACG,KAAI,GAAI,KAAK;MACzBF,OAAO,CAACE,KAAI,GAAI,KAAK;IACzB,CAAC;IAED,MAAMQ,MAAK,GAAIA,CAAA,KAAM;MACjB;MACAC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;;MAEhC;MACAC,MAAM,CAACC,aAAa,CAAC,IAAIC,KAAK,CAAC,QAAQ,CAAC,CAAC;;MAEzC;MACAN,qBAAqB,CAAC,CAAC;IAC3B,CAAC;IAGDb,SAAS,CAAC,MAAM;MACZoB,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEd,iBAAiB,CAAC;IACzD,CAAC,CAAC;IAEFN,eAAe,CAAC,MAAM;MAClBmB,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEf,iBAAiB,CAAC;IAC5D,CAAC,CAAC;IAEFU,MAAM,CAACI,gBAAgB,CAAC,uBAAuB,EAAER,qBAAqB,CAAC;IAEvE,MAAMU,WAAU,GAAIxB,QAAQ,CAAC,MAAM;MAC/B,OAAOK,OAAO,CAACE,KAAI,GAAI,MAAK,GAAI,EAAE;IACtC,CAAC,CAAC;IAEF,OAAO;MACHH,WAAW;MACXE,cAAc;MACdkB,WAAW;MACXhB,iBAAiB;MACjBO,MAAM,CAAE;IACZ,CAAC;EACL;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}