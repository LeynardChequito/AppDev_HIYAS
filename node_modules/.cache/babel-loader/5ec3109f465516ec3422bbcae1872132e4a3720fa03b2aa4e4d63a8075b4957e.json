{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/images/hiyas-banner.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"row col-6 one justify-center\"\n};\nconst _hoisted_2 = {\n  class: \"row col-6 two justify-center\"\n};\nconst _hoisted_3 = {\n  class: \"error-message\"\n};\nconst _hoisted_4 = {\n  class: \"error-message\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#\",\n  class: \"q-mt-md text-caption\",\n  style: {\n    \"text-decoration\": \"none\"\n  }\n}, \"Forgot Password?\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"hr-container\"\n}, [/*#__PURE__*/_createElementVNode(\"hr\", {\n  class: \"hr-line\"\n})], -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_q_img = _resolveComponent(\"q-img\");\n  const _component_q_input = _resolveComponent(\"q-input\");\n  const _component_q_icon = _resolveComponent(\"q-icon\");\n  const _component_q_btn = _resolveComponent(\"q-btn\");\n  const _component_q_space = _resolveComponent(\"q-space\");\n  const _component_q_card_section = _resolveComponent(\"q-card-section\");\n  const _component_q_card = _resolveComponent(\"q-card\");\n  const _component_q_form = _resolveComponent(\"q-form\");\n  return _openBlock(), _createBlock(_component_q_form, {\n    onSubmit: _withModifiers($options.login, [\"prevent\"]),\n    class: \"row justify-center login-page\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\"image here\"), _createCommentVNode(\" <img src=\\\"@/assets/images/hiyas-banner.png\\\" alt=\\\"Hiyas ng Tahanan\\\" /> \"), _createVNode(_component_q_img, {\n      src: _imports_0,\n      class: \"q-mb-lg\",\n      onClick: $options.logoClicked,\n      style: {\n        \"cursor\": \"pointer\"\n      }\n    }, null, 8 /* PROPS */, [\"onClick\"])]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_q_card, {\n      class: \"login-card text-center\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_q_card_section, null, {\n        default: _withCtx(() => [_createVNode(_component_q_input, {\n          modelValue: $data.mobile_or_email,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.mobile_or_email = $event),\n          outlined: \"\",\n          label: \"Mobile or Email\",\n          dense: \"\",\n          debounce: \"300\",\n          error: $data.errors.mobile_or_email ? 'Mobile or Email is incorrect.' : false\n        }, null, 8 /* PROPS */, [\"modelValue\", \"error\"]), _createVNode(_component_q_input, {\n          modelValue: $data.password,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n          type: $data.showPassword ? 'text' : 'password',\n          outlined: \"\",\n          label: \"Password\",\n          dense: \"\",\n          debounce: \"300\",\n          error: $data.errors.password ? 'Password is incorrect.' : false\n        }, {\n          append: _withCtx(() => [_createVNode(_component_q_icon, {\n            name: $data.showPassword ? 'visibility' : 'visibility_off',\n            onClick: $options.togglePassword,\n            style: {\n              \"cursor\": \"pointer\"\n            }\n          }, null, 8 /* PROPS */, [\"name\", \"onClick\"])]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\", \"type\", \"error\"]), _createElementVNode(\"div\", _hoisted_3, _toDisplayString($data.errors.mobile_or_email), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, _toDisplayString($data.errors.password), 1 /* TEXT */), _createVNode(_component_q_btn, {\n          rounded: \"\",\n          color: \"primary\",\n          label: \"Log in\",\n          type: \"submit\",\n          class: \"q-mt-md q-mb-sm\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }), _createVNode(_component_q_space), _hoisted_5]),\n        _: 1 /* STABLE */\n      }), _hoisted_6, _createVNode(_component_q_card_section, null, {\n        default: _withCtx(() => [_createVNode(_component_q_btn, {\n          rounded: \"\",\n          color: \"green\",\n          label: \"Create New Account\",\n          onClick: $options.createAccount,\n          class: \"text-caption\",\n          style: {\n            \"width\": \"70%\"\n          }\n        }, null, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })])]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onSubmit\"]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","href","style","_createBlock","_component_q_form","onSubmit","_withModifiers","$options","login","_hoisted_1","_createCommentVNode","_createVNode","_component_q_img","src","onClick","logoClicked","_hoisted_2","_component_q_card","_component_q_card_section","_component_q_input","$data","mobile_or_email","$event","outlined","label","dense","debounce","error","errors","password","type","showPassword","append","_withCtx","_component_q_icon","name","togglePassword","_hoisted_3","_toDisplayString","_hoisted_4","_component_q_btn","rounded","color","_component_q_space","_hoisted_5","_hoisted_6","createAccount"],"sources":["C:\\Users\\user\\OneDrive\\Desktop\\HiyasProject\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <q-form @submit.prevent=\"login\" class=\"row justify-center login-page\">\r\n    <div class=\"row col-6 one justify-center\">\r\n      <!--image here-->\r\n      <!-- <img src=\"@/assets/images/hiyas-banner.png\" alt=\"Hiyas ng Tahanan\" /> -->\r\n      <q-img src=\"@/assets/images/hiyas-banner.png\" class=\"q-mb-lg\" @click=\"logoClicked\" style=\"cursor: pointer;\" />\r\n    </div>\r\n    <div class=\"row col-6 two justify-center \">\r\n      <q-card class=\"login-card text-center\">\r\n        <q-card-section>\r\n          <q-input v-model=\"mobile_or_email\" outlined label=\"Mobile or Email\" dense debounce=\"300\"\r\n            :error=\"errors.mobile_or_email ? 'Mobile or Email is incorrect.' : false\" />\r\n          <q-input v-model=\"password\" :type=\"showPassword ? 'text' : 'password'\" outlined label=\"Password\" dense\r\n            debounce=\"300\" :error=\"errors.password ? 'Password is incorrect.' : false\">\r\n            <template v-slot:append>\r\n              <q-icon :name=\"showPassword ? 'visibility' : 'visibility_off'\" @click=\"togglePassword\"\r\n                style=\"cursor: pointer;\" />\r\n            </template>\r\n          </q-input>\r\n\r\n          <div class=\"error-message\">{{ errors.mobile_or_email }}</div>\r\n          <div class=\"error-message\">{{ errors.password }}</div>\r\n          <q-btn rounded color=\"primary\" label=\"Log in\" type=\"submit\" class=\"q-mt-md q-mb-sm\" style=\"width: 100%\" />\r\n          <q-space />\r\n          <a href=\"#\" class=\"q-mt-md text-caption\" style=\"text-decoration: none;\">Forgot Password?</a>\r\n        </q-card-section>\r\n        <div class=\"hr-container\">\r\n          <hr class=\"hr-line\">\r\n        </div>\r\n        <q-card-section>\r\n          <q-btn rounded color=\"green\" label=\"Create New Account\" @click=\"createAccount\" class=\"text-caption\"\r\n            style=\"width: 70%\" />\r\n        </q-card-section>\r\n      </q-card>\r\n    </div>\r\n  </q-form>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'login',\r\n  data() {\r\n    return {\r\n      mobile_or_email: '',\r\n      password: '',\r\n      errors: {\r\n        mobile_or_email: '',\r\n        password: '',\r\n      },\r\n      showPassword: false,\r\n    };\r\n  },\r\n  methods: {\r\n    async login() {\r\n      // Clear previous error messages\r\n      this.errors.mobile_or_email = '';\r\n      this.errors.password = '';\r\n\r\n      // Perform validation\r\n      if (!this.mobile_or_email) {\r\n        this.errors.mobile_or_email = 'Mobile or Email is required.';\r\n      }\r\n\r\n      if (!this.password) {\r\n        this.errors.password = 'Password is required.';\r\n      }\r\n\r\n      // If there are validation errors, stop the login process\r\n      if (this.errors.mobile_or_email || this.errors.password) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.post('/login', {\r\n          mobile_or_email: this.mobile_or_email,\r\n          password: this.password,\r\n        });\r\n\r\n        // Assuming your server sends the token in the response\r\n        const token = response.data.token;\r\n\r\n        // Store the token securely (e.g., in local storage)\r\n        localStorage.setItem('token', token);\r\n\r\n        // Set Authorization header after a successful login\r\n        this.setAuthHeader();\r\n\r\n        // Handle the response from the server, e.g., show a success message or redirect to another page\r\n        console.log('Login successful:', response.data);\r\n\r\n        // For example, redirect to the user's dashboard after a successful login\r\n        this.$router.push({ name: 'home' });\r\n      } catch (error) {\r\n        console.error('Error logging in:', error);\r\n        // Handle the error, e.g., display an error message to the user\r\n      }\r\n\r\n      // Simulate an incorrect email or password for demonstration\r\n      if (this.mobile_or_email !== 'correct@email.com' || this.password !== 'correctpassword') {\r\n        this.errors.mobile_or_email = 'Mobile or Email is incorrect.';\r\n        this.errors.password = 'Password is incorrect.';\r\n        return;\r\n      }\r\n    },\r\n    async getUser() {\r\n      try {\r\n        const response = await axios.get('/getUser');\r\n\r\n        // Assuming the server responds with user data\r\n        const user = response.data.user;\r\n        console.log('User data:', user);\r\n      } catch (error) {\r\n        console.error('Error getting user data:', error);\r\n      }\r\n    },\r\n    createAccount() {\r\n      // Add your create account logic here\r\n      this.$router.push({ name: 'register' });\r\n    },\r\n    logoClicked() {\r\n      this.$router.push({ name: 'home' });\r\n    },\r\n    togglePassword() {\r\n      this.showPassword = !this.showPassword;\r\n    },\r\n    setAuthHeader() {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // Call the function when your component is created\r\n    this.setAuthHeader();\r\n    this.getUser();\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.login-page {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #EFEFEF;\r\n}\r\n\r\n.login-card {\r\n  max-width: 400px;\r\n  width: 100%;\r\n}\r\n\r\n\r\n.create-account-card {\r\n  max-width: 300px;\r\n  width: 100%;\r\n}\r\n\r\n.hr-line {\r\n  border: 0;\r\n  border-top: 1px solid #ccc;\r\n  flex-grow: 1;\r\n  width: 80%;\r\n}\r\n\r\n.hr-container {\r\n  align-items: center;\r\n}\r\n\r\n.error-message {\r\n  color: red;\r\n  font-size: 0.75rem;\r\n  margin-top: 4px;\r\n}\r\n\r\n/* .one {\r\n  background-color: blue;\r\n} */\r\n</style>\r\n"],"mappings":";OAKaA,UAAsC;;;EAH1CC,KAAK,EAAC;AAA8B;;EAKpCA,KAAK,EAAC;AAA+B;;EAa/BA,KAAK,EAAC;AAAe;;EACrBA,KAAK,EAAC;AAAe;gEAG1BC,mBAAA,CAA4F;EAAzFC,IAAI,EAAC,GAAG;EAACF,KAAK,EAAC,sBAAsB;EAACG,KAA8B,EAA9B;IAAA;EAAA;GAA+B,kBAAgB;gEAE1FF,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAc,I,aACvBC,mBAAA,CAAoB;EAAhBD,KAAK,EAAC;AAAS,G;;;;;;;;;;;uBA1B3BI,YAAA,CAkCSC,iBAAA;IAlCAC,QAAM,EAAAC,cAAA,CAAUC,QAAA,CAAAC,KAAK;IAAET,KAAK,EAAC;;sBACpC,MAIM,CAJNC,mBAAA,CAIM,OAJNS,UAIM,GAHJC,mBAAA,cAAiB,EACjBA,mBAAA,+EAA8E,EAC9EC,YAAA,CAA8GC,gBAAA;MAAvGC,GAAsC,EAAtCf,UAAsC;MAACC,KAAK,EAAC,SAAS;MAAEe,OAAK,EAAEP,QAAA,CAAAQ,WAAW;MAAEb,KAAwB,EAAxB;QAAA;MAAA;4CAErFF,mBAAA,CA2BM,OA3BNgB,UA2BM,GA1BJL,YAAA,CAyBSM,iBAAA;MAzBDlB,KAAK,EAAC;IAAwB;wBACpC,MAgBiB,CAhBjBY,YAAA,CAgBiBO,yBAAA;0BAff,MAC8E,CAD9EP,YAAA,CAC8EQ,kBAAA;sBAD5DC,KAAA,CAAAC,eAAe;qEAAfD,KAAA,CAAAC,eAAe,GAAAC,MAAA;UAAEC,QAAQ,EAAR,EAAQ;UAACC,KAAK,EAAC,iBAAiB;UAACC,KAAK,EAAL,EAAK;UAACC,QAAQ,EAAC,KAAK;UACrFC,KAAK,EAAEP,KAAA,CAAAQ,MAAM,CAACP,eAAe;0DAChCV,YAAA,CAMUQ,kBAAA;sBANQC,KAAA,CAAAS,QAAQ;qEAART,KAAA,CAAAS,QAAQ,GAAAP,MAAA;UAAGQ,IAAI,EAAEV,KAAA,CAAAW,YAAY;UAAwBR,QAAQ,EAAR,EAAQ;UAACC,KAAK,EAAC,UAAU;UAACC,KAAK,EAAL,EAAK;UACpGC,QAAQ,EAAC,KAAK;UAAEC,KAAK,EAAEP,KAAA,CAAAQ,MAAM,CAACC,QAAQ;;UACrBG,MAAM,EAAAC,QAAA,CACrB,MAC6B,CAD7BtB,YAAA,CAC6BuB,iBAAA;YADpBC,IAAI,EAAEf,KAAA,CAAAW,YAAY;YAAqCjB,OAAK,EAAEP,QAAA,CAAA6B,cAAc;YACnFlC,KAAwB,EAAxB;cAAA;YAAA;;;4DAINF,mBAAA,CAA6D,OAA7DqC,UAA6D,EAAAC,gBAAA,CAA/BlB,KAAA,CAAAQ,MAAM,CAACP,eAAe,kBACpDrB,mBAAA,CAAsD,OAAtDuC,UAAsD,EAAAD,gBAAA,CAAxBlB,KAAA,CAAAQ,MAAM,CAACC,QAAQ,kBAC7ClB,YAAA,CAA0G6B,gBAAA;UAAnGC,OAAO,EAAP,EAAO;UAACC,KAAK,EAAC,SAAS;UAAClB,KAAK,EAAC,QAAQ;UAACM,IAAI,EAAC,QAAQ;UAAC/B,KAAK,EAAC,iBAAiB;UAACG,KAAmB,EAAnB;YAAA;UAAA;YACpFS,YAAA,CAAWgC,kBAAA,GACXC,UAA4F,C;;UAE9FC,UAEM,EACNlC,YAAA,CAGiBO,yBAAA;0BAFf,MACuB,CADvBP,YAAA,CACuB6B,gBAAA;UADhBC,OAAO,EAAP,EAAO;UAACC,KAAK,EAAC,OAAO;UAAClB,KAAK,EAAC,oBAAoB;UAAEV,OAAK,EAAEP,QAAA,CAAAuC,aAAa;UAAE/C,KAAK,EAAC,cAAc;UACjGG,KAAkB,EAAlB;YAAA;UAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}